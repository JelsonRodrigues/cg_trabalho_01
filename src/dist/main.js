(()=>{var e={887:(e,t,r)=>{"use strict";r.r(t),r.d(t,{glMatrix:()=>n,mat2:()=>a,mat2d:()=>o,mat3:()=>i,mat4:()=>s,quat:()=>l,quat2:()=>d,vec2:()=>h,vec3:()=>u,vec4:()=>c});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>m,EPSILON:()=>f,RANDOM:()=>_,equals:()=>x,setMatrixArrayType:()=>v,toRadian:()=>p});var a={};r.r(a),r.d(a,{LDU:()=>S,add:()=>I,adjoint:()=>y,clone:()=>M,copy:()=>R,create:()=>g,determinant:()=>G,equals:()=>N,exactEquals:()=>F,frob:()=>j,fromRotation:()=>U,fromScaling:()=>D,fromValues:()=>C,identity:()=>E,invert:()=>L,mul:()=>Y,multiply:()=>w,multiplyScalar:()=>V,multiplyScalarAndAdd:()=>X,rotate:()=>B,scale:()=>P,set:()=>A,str:()=>W,sub:()=>z,subtract:()=>O,transpose:()=>T});var o={};r.r(o),r.d(o,{add:()=>ce,clone:()=>k,copy:()=>K,create:()=>q,determinant:()=>J,equals:()=>me,exactEquals:()=>fe,frob:()=>ue,fromRotation:()=>ae,fromScaling:()=>oe,fromTranslation:()=>ie,fromValues:()=>$,identity:()=>H,invert:()=>Q,mul:()=>_e,multiply:()=>ee,multiplyScalar:()=>de,multiplyScalarAndAdd:()=>he,rotate:()=>te,scale:()=>re,set:()=>Z,str:()=>se,sub:()=>ve,subtract:()=>le,translate:()=>ne});var i={};r.r(i),r.d(i,{add:()=>Ne,adjoint:()=>Te,clone:()=>xe,copy:()=>ge,create:()=>be,determinant:()=>Le,equals:()=>qe,exactEquals:()=>ze,frob:()=>Fe,fromMat2d:()=>We,fromMat4:()=>pe,fromQuat:()=>je,fromRotation:()=>Ue,fromScaling:()=>De,fromTranslation:()=>Pe,fromValues:()=>Me,identity:()=>Ee,invert:()=>Ae,mul:()=>ke,multiply:()=>ye,multiplyScalar:()=>Xe,multiplyScalarAndAdd:()=>Ye,normalFromMat4:()=>Se,projection:()=>Ie,rotate:()=>we,scale:()=>Be,set:()=>Re,str:()=>Oe,sub:()=>Ke,subtract:()=>Ve,translate:()=>Ge,transpose:()=>Ce});var s={};r.r(s),r.d(s,{add:()=>It,adjoint:()=>nt,clone:()=>$e,copy:()=>Ze,create:()=>He,determinant:()=>at,equals:()=>Xt,exactEquals:()=>Vt,frob:()=>St,fromQuat:()=>At,fromQuat2:()=>xt,fromRotation:()=>mt,fromRotationTranslation:()=>pt,fromRotationTranslationScale:()=>Et,fromRotationTranslationScaleOrigin:()=>Ct,fromScaling:()=>ft,fromTranslation:()=>ht,fromValues:()=>Qe,fromXRotation:()=>_t,fromYRotation:()=>vt,fromZRotation:()=>bt,frustum:()=>Tt,getRotation:()=>Rt,getScaling:()=>Mt,getTranslation:()=>gt,identity:()=>et,invert:()=>rt,lookAt:()=>Dt,mul:()=>Yt,multiply:()=>ot,multiplyScalar:()=>Ft,multiplyScalarAndAdd:()=>Nt,ortho:()=>Pt,orthoNO:()=>Bt,orthoZO:()=>Ut,perspective:()=>yt,perspectiveFromFieldOfView:()=>wt,perspectiveNO:()=>Lt,perspectiveZO:()=>Gt,rotate:()=>ut,rotateX:()=>ct,rotateY:()=>lt,rotateZ:()=>dt,scale:()=>st,set:()=>Je,str:()=>jt,sub:()=>zt,subtract:()=>Ot,targetTo:()=>Wt,translate:()=>it,transpose:()=>tt});var u={};r.r(u),r.d(u,{add:()=>Qt,angle:()=>Lr,bezier:()=>xr,ceil:()=>rr,clone:()=>kt,copy:()=>$t,create:()=>qt,cross:()=>vr,dist:()=>jr,distance:()=>cr,div:()=>Wr,divide:()=>tr,dot:()=>_r,equals:()=>Br,exactEquals:()=>wr,floor:()=>nr,forEach:()=>Fr,fromValues:()=>Ht,hermite:()=>pr,inverse:()=>fr,len:()=>Ir,length:()=>Kt,lerp:()=>br,max:()=>or,min:()=>ar,mul:()=>Dr,multiply:()=>er,negate:()=>hr,normalize:()=>mr,random:()=>gr,rotateX:()=>Cr,rotateY:()=>Ar,rotateZ:()=>Tr,round:()=>ir,scale:()=>sr,scaleAndAdd:()=>ur,set:()=>Zt,sqrDist:()=>Sr,sqrLen:()=>Or,squaredDistance:()=>lr,squaredLength:()=>dr,str:()=>Gr,sub:()=>Ur,subtract:()=>Jt,transformMat3:()=>Rr,transformMat4:()=>Mr,transformQuat:()=>Er,zero:()=>yr});var c={};r.r(c),r.d(c,{add:()=>qr,ceil:()=>$r,clone:()=>Vr,copy:()=>Yr,create:()=>Nr,cross:()=>hn,dist:()=>Cn,distance:()=>nn,div:()=>En,divide:()=>Hr,dot:()=>dn,equals:()=>gn,exactEquals:()=>xn,floor:()=>Zr,forEach:()=>yn,fromValues:()=>Xr,inverse:()=>cn,len:()=>Tn,length:()=>on,lerp:()=>fn,max:()=>Jr,min:()=>Qr,mul:()=>Rn,multiply:()=>Kr,negate:()=>un,normalize:()=>ln,random:()=>mn,round:()=>en,scale:()=>tn,scaleAndAdd:()=>rn,set:()=>zr,sqrDist:()=>An,sqrLen:()=>Ln,squaredDistance:()=>an,squaredLength:()=>sn,str:()=>pn,sub:()=>Mn,subtract:()=>kr,transformMat4:()=>_n,transformQuat:()=>vn,zero:()=>bn});var l={};r.r(l),r.d(l,{add:()=>oa,calculateW:()=>In,clone:()=>ta,conjugate:()=>zn,copy:()=>na,create:()=>Gn,dot:()=>ua,equals:()=>va,exactEquals:()=>_a,exp:()=>On,fromEuler:()=>kn,fromMat3:()=>qn,fromValues:()=>ra,getAngle:()=>Un,getAxisAngle:()=>Pn,identity:()=>wn,invert:()=>Yn,len:()=>da,length:()=>la,lerp:()=>ca,ln:()=>Fn,mul:()=>ia,multiply:()=>Dn,normalize:()=>ma,pow:()=>Nn,random:()=>Xn,rotateX:()=>Wn,rotateY:()=>jn,rotateZ:()=>Sn,rotationTo:()=>ba,scale:()=>sa,set:()=>aa,setAxes:()=>xa,setAxisAngle:()=>Bn,slerp:()=>Vn,sqlerp:()=>pa,sqrLen:()=>fa,squaredLength:()=>ha,str:()=>Kn});var d={};r.r(d),r.d(d,{add:()=>Xa,clone:()=>Ma,conjugate:()=>$a,copy:()=>ya,create:()=>ga,dot:()=>ka,equals:()=>ao,exactEquals:()=>no,fromMat4:()=>La,fromRotation:()=>Ta,fromRotationTranslation:()=>Ca,fromRotationTranslationValues:()=>Ea,fromTranslation:()=>Aa,fromValues:()=>Ra,getDual:()=>Pa,getReal:()=>Ba,getTranslation:()=>Wa,identity:()=>Ga,invert:()=>Ha,len:()=>Qa,length:()=>Za,lerp:()=>Ka,mul:()=>za,multiply:()=>Ya,normalize:()=>to,rotateAroundAxis:()=>Va,rotateByQuatAppend:()=>Fa,rotateByQuatPrepend:()=>Na,rotateX:()=>Sa,rotateY:()=>Ia,rotateZ:()=>Oa,scale:()=>qa,set:()=>wa,setDual:()=>Da,setReal:()=>Ua,sqrLen:()=>eo,squaredLength:()=>Ja,str:()=>ro,translate:()=>ja});var h={};r.r(h),r.d(h,{add:()=>lo,angle:()=>Io,ceil:()=>_o,clone:()=>io,copy:()=>uo,create:()=>oo,cross:()=>wo,dist:()=>ko,distance:()=>Ro,div:()=>qo,divide:()=>mo,dot:()=>Go,equals:()=>Vo,exactEquals:()=>No,floor:()=>vo,forEach:()=>$o,fromValues:()=>so,inverse:()=>Lo,len:()=>Xo,length:()=>Co,lerp:()=>Bo,max:()=>po,min:()=>bo,mul:()=>zo,multiply:()=>fo,negate:()=>To,normalize:()=>yo,random:()=>Po,rotate:()=>So,round:()=>xo,scale:()=>go,scaleAndAdd:()=>Mo,set:()=>co,sqrDist:()=>Ko,sqrLen:()=>Ho,squaredDistance:()=>Eo,squaredLength:()=>Ao,str:()=>Fo,sub:()=>Yo,subtract:()=>ho,transformMat2:()=>Uo,transformMat2d:()=>Do,transformMat3:()=>Wo,transformMat4:()=>jo,zero:()=>Oo});var f=1e-6,m="undefined"!=typeof Float32Array?Float32Array:Array,_=Math.random;function v(e){m=e}var b=Math.PI/180;function p(e){return e*b}function x(e,t){return Math.abs(e-t)<=f*Math.max(1,Math.abs(e),Math.abs(t))}function g(){var e=new m(4);return m!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function M(e){var t=new m(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function R(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function E(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function C(e,t,r,n){var a=new m(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function A(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e}function T(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function L(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r*o-a*n;return i?(i=1/i,e[0]=o*i,e[1]=-n*i,e[2]=-a*i,e[3]=r*i,e):null}function y(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function G(e){return e[0]*e[3]-e[2]*e[1]}function w(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*s+o*u,e[1]=a*s+i*u,e[2]=n*c+o*l,e[3]=a*c+i*l,e}function B(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+o*s,e[1]=a*u+i*s,e[2]=n*-s+o*u,e[3]=a*-s+i*u,e}function P(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=r[0],u=r[1];return e[0]=n*s,e[1]=a*s,e[2]=o*u,e[3]=i*u,e}function U(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function D(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function W(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function j(e){return Math.hypot(e[0],e[1],e[2],e[3])}function S(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function I(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function O(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function F(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function N(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-u)<=f*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-c)<=f*Math.max(1,Math.abs(o),Math.abs(c))}function V(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function X(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Y=w,z=O;function q(){var e=new m(6);return m!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function k(e){var t=new m(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function H(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function $(e,t,r,n,a,o){var i=new m(6);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i[4]=a,i[5]=o,i}function Z(e,t,r,n,a,o,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=i,e}function Q(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],u=r*o-n*a;return u?(u=1/u,e[0]=o*u,e[1]=-n*u,e[2]=-a*u,e[3]=r*u,e[4]=(a*s-o*i)*u,e[5]=(n*i-r*s)*u,e):null}function J(e){return e[0]*e[3]-e[1]*e[2]}function ee(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=r[0],l=r[1],d=r[2],h=r[3],f=r[4],m=r[5];return e[0]=n*c+o*l,e[1]=a*c+i*l,e[2]=n*d+o*h,e[3]=a*d+i*h,e[4]=n*f+o*m+s,e[5]=a*f+i*m+u,e}function te(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*c,e[1]=a*l+i*c,e[2]=n*-c+o*l,e[3]=a*-c+i*l,e[4]=s,e[5]=u,e}function re(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n*c,e[1]=a*c,e[2]=o*l,e[3]=i*l,e[4]=s,e[5]=u,e}function ne(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=n*c+o*l+s,e[5]=a*c+i*l+u,e}function ae(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function oe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function ie(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function se(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function ue(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function ce(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function le(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function de(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function he(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function fe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function me(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],u=t[0],c=t[1],l=t[2],d=t[3],h=t[4],m=t[5];return Math.abs(r-u)<=f*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=f*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-l)<=f*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-d)<=f*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-h)<=f*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-m)<=f*Math.max(1,Math.abs(s),Math.abs(m))}var _e=ee,ve=le;function be(){var e=new m(9);return m!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function pe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function xe(e){var t=new m(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ge(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Me(e,t,r,n,a,o,i,s,u){var c=new m(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=n,c[4]=a,c[5]=o,c[6]=i,c[7]=s,c[8]=u,c}function Re(e,t,r,n,a,o,i,s,u,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=i,e[6]=s,e[7]=u,e[8]=c,e}function Ee(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ce(e,t){if(e===t){var r=t[1],n=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Ae(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],d=l*i-s*c,h=-l*o+s*u,f=c*o-i*u,m=r*d+n*h+a*f;return m?(m=1/m,e[0]=d*m,e[1]=(-l*n+a*c)*m,e[2]=(s*n-a*i)*m,e[3]=h*m,e[4]=(l*r-a*u)*m,e[5]=(-s*r+a*o)*m,e[6]=f*m,e[7]=(-c*r+n*u)*m,e[8]=(i*r-n*o)*m,e):null}function Te(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=i*l-s*c,e[1]=a*c-n*l,e[2]=n*s-a*i,e[3]=s*u-o*l,e[4]=r*l-a*u,e[5]=a*o-r*s,e[6]=o*c-i*u,e[7]=n*u-r*c,e[8]=r*i-n*o,e}function Le(e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],i=e[5],s=e[6],u=e[7],c=e[8];return t*(c*o-i*u)+r*(-c*a+i*s)+n*(u*a-o*s)}function ye(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=r[0],f=r[1],m=r[2],_=r[3],v=r[4],b=r[5],p=r[6],x=r[7],g=r[8];return e[0]=h*n+f*i+m*c,e[1]=h*a+f*s+m*l,e[2]=h*o+f*u+m*d,e[3]=_*n+v*i+b*c,e[4]=_*a+v*s+b*l,e[5]=_*o+v*u+b*d,e[6]=p*n+x*i+g*c,e[7]=p*a+x*s+g*l,e[8]=p*o+x*u+g*d,e}function Ge(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=r[0],f=r[1];return e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=s,e[5]=u,e[6]=h*n+f*i+c,e[7]=h*a+f*s+l,e[8]=h*o+f*u+d,e}function we(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=Math.sin(r),f=Math.cos(r);return e[0]=f*n+h*i,e[1]=f*a+h*s,e[2]=f*o+h*u,e[3]=f*i-h*n,e[4]=f*s-h*a,e[5]=f*u-h*o,e[6]=c,e[7]=l,e[8]=d,e}function Be(e,t,r){var n=r[0],a=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Pe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Ue(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function De(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function We(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function je(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r+r,s=n+n,u=a+a,c=r*i,l=n*i,d=n*s,h=a*i,f=a*s,m=a*u,_=o*i,v=o*s,b=o*u;return e[0]=1-d-m,e[3]=l-b,e[6]=h+v,e[1]=l+b,e[4]=1-c-m,e[7]=f-_,e[2]=h-v,e[5]=f+_,e[8]=1-c-d,e}function Se(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],m=t[12],_=t[13],v=t[14],b=t[15],p=r*s-n*i,x=r*u-a*i,g=r*c-o*i,M=n*u-a*s,R=n*c-o*s,E=a*c-o*u,C=l*_-d*m,A=l*v-h*m,T=l*b-f*m,L=d*v-h*_,y=d*b-f*_,G=h*b-f*v,w=p*G-x*y+g*L+M*T-R*A+E*C;return w?(w=1/w,e[0]=(s*G-u*y+c*L)*w,e[1]=(u*T-i*G-c*A)*w,e[2]=(i*y-s*T+c*C)*w,e[3]=(a*y-n*G-o*L)*w,e[4]=(r*G-a*T+o*A)*w,e[5]=(n*T-r*y-o*C)*w,e[6]=(_*E-v*R+b*M)*w,e[7]=(v*g-m*E-b*x)*w,e[8]=(m*R-_*g+b*p)*w,e):null}function Ie(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Oe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Fe(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Ne(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function Ve(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function Xe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Ye(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function ze(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function qe(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],d=t[0],h=t[1],m=t[2],_=t[3],v=t[4],b=t[5],p=t[6],x=t[7],g=t[8];return Math.abs(r-d)<=f*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=f*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-m)<=f*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-_)<=f*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-v)<=f*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-b)<=f*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-p)<=f*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(c-x)<=f*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-g)<=f*Math.max(1,Math.abs(l),Math.abs(g))}var ke=ye,Ke=Ve;function He(){var e=new m(16);return m!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function $e(e){var t=new m(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ze(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qe(e,t,r,n,a,o,i,s,u,c,l,d,h,f,_,v){var b=new m(16);return b[0]=e,b[1]=t,b[2]=r,b[3]=n,b[4]=a,b[5]=o,b[6]=i,b[7]=s,b[8]=u,b[9]=c,b[10]=l,b[11]=d,b[12]=h,b[13]=f,b[14]=_,b[15]=v,b}function Je(e,t,r,n,a,o,i,s,u,c,l,d,h,f,m,_,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=i,e[6]=s,e[7]=u,e[8]=c,e[9]=l,e[10]=d,e[11]=h,e[12]=f,e[13]=m,e[14]=_,e[15]=v,e}function et(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],o=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=a,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function rt(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],m=t[12],_=t[13],v=t[14],b=t[15],p=r*s-n*i,x=r*u-a*i,g=r*c-o*i,M=n*u-a*s,R=n*c-o*s,E=a*c-o*u,C=l*_-d*m,A=l*v-h*m,T=l*b-f*m,L=d*v-h*_,y=d*b-f*_,G=h*b-f*v,w=p*G-x*y+g*L+M*T-R*A+E*C;return w?(w=1/w,e[0]=(s*G-u*y+c*L)*w,e[1]=(a*y-n*G-o*L)*w,e[2]=(_*E-v*R+b*M)*w,e[3]=(h*R-d*E-f*M)*w,e[4]=(u*T-i*G-c*A)*w,e[5]=(r*G-a*T+o*A)*w,e[6]=(v*g-m*E-b*x)*w,e[7]=(l*E-h*g+f*x)*w,e[8]=(i*y-s*T+c*C)*w,e[9]=(n*T-r*y-o*C)*w,e[10]=(m*R-_*g+b*p)*w,e[11]=(d*g-l*R-f*p)*w,e[12]=(s*A-i*L-u*C)*w,e[13]=(r*L-n*A+a*C)*w,e[14]=(_*x-m*M-v*p)*w,e[15]=(l*M-d*x+h*p)*w,e):null}function nt(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],m=t[12],_=t[13],v=t[14],b=t[15];return e[0]=s*(h*b-f*v)-d*(u*b-c*v)+_*(u*f-c*h),e[1]=-(n*(h*b-f*v)-d*(a*b-o*v)+_*(a*f-o*h)),e[2]=n*(u*b-c*v)-s*(a*b-o*v)+_*(a*c-o*u),e[3]=-(n*(u*f-c*h)-s*(a*f-o*h)+d*(a*c-o*u)),e[4]=-(i*(h*b-f*v)-l*(u*b-c*v)+m*(u*f-c*h)),e[5]=r*(h*b-f*v)-l*(a*b-o*v)+m*(a*f-o*h),e[6]=-(r*(u*b-c*v)-i*(a*b-o*v)+m*(a*c-o*u)),e[7]=r*(u*f-c*h)-i*(a*f-o*h)+l*(a*c-o*u),e[8]=i*(d*b-f*_)-l*(s*b-c*_)+m*(s*f-c*d),e[9]=-(r*(d*b-f*_)-l*(n*b-o*_)+m*(n*f-o*d)),e[10]=r*(s*b-c*_)-i*(n*b-o*_)+m*(n*c-o*s),e[11]=-(r*(s*f-c*d)-i*(n*f-o*d)+l*(n*c-o*s)),e[12]=-(i*(d*v-h*_)-l*(s*v-u*_)+m*(s*h-u*d)),e[13]=r*(d*v-h*_)-l*(n*v-a*_)+m*(n*h-a*d),e[14]=-(r*(s*v-u*_)-i*(n*v-a*_)+m*(n*u-a*s)),e[15]=r*(s*h-u*d)-i*(n*h-a*d)+l*(n*u-a*s),e}function at(e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],i=e[5],s=e[6],u=e[7],c=e[8],l=e[9],d=e[10],h=e[11],f=e[12],m=e[13],_=e[14],v=e[15];return(t*i-r*o)*(d*v-h*_)-(t*s-n*o)*(l*v-h*m)+(t*u-a*o)*(l*_-d*m)+(r*s-n*i)*(c*v-h*f)-(r*u-a*i)*(c*_-d*f)+(n*u-a*s)*(c*m-l*f)}function ot(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=t[9],f=t[10],m=t[11],_=t[12],v=t[13],b=t[14],p=t[15],x=r[0],g=r[1],M=r[2],R=r[3];return e[0]=x*n+g*s+M*d+R*_,e[1]=x*a+g*u+M*h+R*v,e[2]=x*o+g*c+M*f+R*b,e[3]=x*i+g*l+M*m+R*p,x=r[4],g=r[5],M=r[6],R=r[7],e[4]=x*n+g*s+M*d+R*_,e[5]=x*a+g*u+M*h+R*v,e[6]=x*o+g*c+M*f+R*b,e[7]=x*i+g*l+M*m+R*p,x=r[8],g=r[9],M=r[10],R=r[11],e[8]=x*n+g*s+M*d+R*_,e[9]=x*a+g*u+M*h+R*v,e[10]=x*o+g*c+M*f+R*b,e[11]=x*i+g*l+M*m+R*p,x=r[12],g=r[13],M=r[14],R=r[15],e[12]=x*n+g*s+M*d+R*_,e[13]=x*a+g*u+M*h+R*v,e[14]=x*o+g*c+M*f+R*b,e[15]=x*i+g*l+M*m+R*p,e}function it(e,t,r){var n,a,o,i,s,u,c,l,d,h,f,m,_=r[0],v=r[1],b=r[2];return t===e?(e[12]=t[0]*_+t[4]*v+t[8]*b+t[12],e[13]=t[1]*_+t[5]*v+t[9]*b+t[13],e[14]=t[2]*_+t[6]*v+t[10]*b+t[14],e[15]=t[3]*_+t[7]*v+t[11]*b+t[15]):(n=t[0],a=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=t[9],f=t[10],m=t[11],e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=d,e[9]=h,e[10]=f,e[11]=m,e[12]=n*_+s*v+d*b+t[12],e[13]=a*_+u*v+h*b+t[13],e[14]=o*_+c*v+f*b+t[14],e[15]=i*_+l*v+m*b+t[15]),e}function st(e,t,r){var n=r[0],a=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ut(e,t,r,n){var a,o,i,s,u,c,l,d,h,m,_,v,b,p,x,g,M,R,E,C,A,T,L,y,G=n[0],w=n[1],B=n[2],P=Math.hypot(G,w,B);return P<f?null:(G*=P=1/P,w*=P,B*=P,a=Math.sin(r),i=1-(o=Math.cos(r)),s=t[0],u=t[1],c=t[2],l=t[3],d=t[4],h=t[5],m=t[6],_=t[7],v=t[8],b=t[9],p=t[10],x=t[11],g=G*G*i+o,M=w*G*i+B*a,R=B*G*i-w*a,E=G*w*i-B*a,C=w*w*i+o,A=B*w*i+G*a,T=G*B*i+w*a,L=w*B*i-G*a,y=B*B*i+o,e[0]=s*g+d*M+v*R,e[1]=u*g+h*M+b*R,e[2]=c*g+m*M+p*R,e[3]=l*g+_*M+x*R,e[4]=s*E+d*C+v*A,e[5]=u*E+h*C+b*A,e[6]=c*E+m*C+p*A,e[7]=l*E+_*C+x*A,e[8]=s*T+d*L+v*y,e[9]=u*T+h*L+b*y,e[10]=c*T+m*L+p*y,e[11]=l*T+_*L+x*y,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ct(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[4],i=t[5],s=t[6],u=t[7],c=t[8],l=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+c*n,e[5]=i*a+l*n,e[6]=s*a+d*n,e[7]=u*a+h*n,e[8]=c*a-o*n,e[9]=l*a-i*n,e[10]=d*a-s*n,e[11]=h*a-u*n,e}function lt(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],i=t[1],s=t[2],u=t[3],c=t[8],l=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-c*n,e[1]=i*a-l*n,e[2]=s*a-d*n,e[3]=u*a-h*n,e[8]=o*n+c*a,e[9]=i*n+l*a,e[10]=s*n+d*a,e[11]=u*n+h*a,e}function dt(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],i=t[1],s=t[2],u=t[3],c=t[4],l=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+c*n,e[1]=i*a+l*n,e[2]=s*a+d*n,e[3]=u*a+h*n,e[4]=c*a-o*n,e[5]=l*a-i*n,e[6]=d*a-s*n,e[7]=h*a-u*n,e}function ht(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ft(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mt(e,t,r){var n,a,o,i=r[0],s=r[1],u=r[2],c=Math.hypot(i,s,u);return c<f?null:(i*=c=1/c,s*=c,u*=c,n=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=i*i*o+a,e[1]=s*i*o+u*n,e[2]=u*i*o-s*n,e[3]=0,e[4]=i*s*o-u*n,e[5]=s*s*o+a,e[6]=u*s*o+i*n,e[7]=0,e[8]=i*u*o+s*n,e[9]=s*u*o-i*n,e[10]=u*u*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function _t(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vt(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bt(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pt(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=n+n,u=a+a,c=o+o,l=n*s,d=n*u,h=n*c,f=a*u,m=a*c,_=o*c,v=i*s,b=i*u,p=i*c;return e[0]=1-(f+_),e[1]=d+p,e[2]=h-b,e[3]=0,e[4]=d-p,e[5]=1-(l+_),e[6]=m+v,e[7]=0,e[8]=h+b,e[9]=m-v,e[10]=1-(l+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function xt(e,t){var r=new m(3),n=-t[0],a=-t[1],o=-t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=n*n+a*a+o*o+i*i;return d>0?(r[0]=2*(s*i+l*n+u*o-c*a)/d,r[1]=2*(u*i+l*a+c*n-s*o)/d,r[2]=2*(c*i+l*o+s*a-u*n)/d):(r[0]=2*(s*i+l*n+u*o-c*a),r[1]=2*(u*i+l*a+c*n-s*o),r[2]=2*(c*i+l*o+s*a-u*n)),pt(e,t,r),e}function gt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Mt(e,t){var r=t[0],n=t[1],a=t[2],o=t[4],i=t[5],s=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.hypot(r,n,a),e[1]=Math.hypot(o,i,s),e[2]=Math.hypot(u,c,l),e}function Rt(e,t){var r=new m(3);Mt(r,t);var n=1/r[0],a=1/r[1],o=1/r[2],i=t[0]*n,s=t[1]*a,u=t[2]*o,c=t[4]*n,l=t[5]*a,d=t[6]*o,h=t[8]*n,f=t[9]*a,_=t[10]*o,v=i+l+_,b=0;return v>0?(b=2*Math.sqrt(v+1),e[3]=.25*b,e[0]=(d-f)/b,e[1]=(h-u)/b,e[2]=(s-c)/b):i>l&&i>_?(b=2*Math.sqrt(1+i-l-_),e[3]=(d-f)/b,e[0]=.25*b,e[1]=(s+c)/b,e[2]=(h+u)/b):l>_?(b=2*Math.sqrt(1+l-i-_),e[3]=(h-u)/b,e[0]=(s+c)/b,e[1]=.25*b,e[2]=(d+f)/b):(b=2*Math.sqrt(1+_-i-l),e[3]=(s-c)/b,e[0]=(h+u)/b,e[1]=(d+f)/b,e[2]=.25*b),e}function Et(e,t,r,n){var a=t[0],o=t[1],i=t[2],s=t[3],u=a+a,c=o+o,l=i+i,d=a*u,h=a*c,f=a*l,m=o*c,_=o*l,v=i*l,b=s*u,p=s*c,x=s*l,g=n[0],M=n[1],R=n[2];return e[0]=(1-(m+v))*g,e[1]=(h+x)*g,e[2]=(f-p)*g,e[3]=0,e[4]=(h-x)*M,e[5]=(1-(d+v))*M,e[6]=(_+b)*M,e[7]=0,e[8]=(f+p)*R,e[9]=(_-b)*R,e[10]=(1-(d+m))*R,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Ct(e,t,r,n,a){var o=t[0],i=t[1],s=t[2],u=t[3],c=o+o,l=i+i,d=s+s,h=o*c,f=o*l,m=o*d,_=i*l,v=i*d,b=s*d,p=u*c,x=u*l,g=u*d,M=n[0],R=n[1],E=n[2],C=a[0],A=a[1],T=a[2],L=(1-(_+b))*M,y=(f+g)*M,G=(m-x)*M,w=(f-g)*R,B=(1-(h+b))*R,P=(v+p)*R,U=(m+x)*E,D=(v-p)*E,W=(1-(h+_))*E;return e[0]=L,e[1]=y,e[2]=G,e[3]=0,e[4]=w,e[5]=B,e[6]=P,e[7]=0,e[8]=U,e[9]=D,e[10]=W,e[11]=0,e[12]=r[0]+C-(L*C+w*A+U*T),e[13]=r[1]+A-(y*C+B*A+D*T),e[14]=r[2]+T-(G*C+P*A+W*T),e[15]=1,e}function At(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r+r,s=n+n,u=a+a,c=r*i,l=n*i,d=n*s,h=a*i,f=a*s,m=a*u,_=o*i,v=o*s,b=o*u;return e[0]=1-d-m,e[1]=l+b,e[2]=h-v,e[3]=0,e[4]=l-b,e[5]=1-c-m,e[6]=f+_,e[7]=0,e[8]=h+v,e[9]=f-_,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Tt(e,t,r,n,a,o,i){var s=1/(r-t),u=1/(a-n),c=1/(o-i);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(a+n)*u,e[10]=(i+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*c,e[15]=0,e}function Lt(e,t,r,n,a){var o,i=1/Math.tan(t/2);return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(o=1/(n-a),e[10]=(a+n)*o,e[14]=2*a*n*o):(e[10]=-1,e[14]=-2*n),e}var yt=Lt;function Gt(e,t,r,n,a){var o,i=1/Math.tan(t/2);return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(o=1/(n-a),e[10]=a*o,e[14]=a*n*o):(e[10]=-1,e[14]=-n),e}function wt(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(a+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(i-s)*u*.5,e[9]=(a-o)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function Bt(e,t,r,n,a,o,i){var s=1/(t-r),u=1/(n-a),c=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(a+n)*u,e[14]=(i+o)*c,e[15]=1,e}var Pt=Bt;function Ut(e,t,r,n,a,o,i){var s=1/(t-r),u=1/(n-a),c=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+r)*s,e[13]=(a+n)*u,e[14]=o*c,e[15]=1,e}function Dt(e,t,r,n){var a,o,i,s,u,c,l,d,h,m,_=t[0],v=t[1],b=t[2],p=n[0],x=n[1],g=n[2],M=r[0],R=r[1],E=r[2];return Math.abs(_-M)<f&&Math.abs(v-R)<f&&Math.abs(b-E)<f?et(e):(l=_-M,d=v-R,h=b-E,a=x*(h*=m=1/Math.hypot(l,d,h))-g*(d*=m),o=g*(l*=m)-p*h,i=p*d-x*l,(m=Math.hypot(a,o,i))?(a*=m=1/m,o*=m,i*=m):(a=0,o=0,i=0),s=d*i-h*o,u=h*a-l*i,c=l*o-d*a,(m=Math.hypot(s,u,c))?(s*=m=1/m,u*=m,c*=m):(s=0,u=0,c=0),e[0]=a,e[1]=s,e[2]=l,e[3]=0,e[4]=o,e[5]=u,e[6]=d,e[7]=0,e[8]=i,e[9]=c,e[10]=h,e[11]=0,e[12]=-(a*_+o*v+i*b),e[13]=-(s*_+u*v+c*b),e[14]=-(l*_+d*v+h*b),e[15]=1,e)}function Wt(e,t,r,n){var a=t[0],o=t[1],i=t[2],s=n[0],u=n[1],c=n[2],l=a-r[0],d=o-r[1],h=i-r[2],f=l*l+d*d+h*h;f>0&&(l*=f=1/Math.sqrt(f),d*=f,h*=f);var m=u*h-c*d,_=c*l-s*h,v=s*d-u*l;return(f=m*m+_*_+v*v)>0&&(m*=f=1/Math.sqrt(f),_*=f,v*=f),e[0]=m,e[1]=_,e[2]=v,e[3]=0,e[4]=d*v-h*_,e[5]=h*m-l*v,e[6]=l*_-d*m,e[7]=0,e[8]=l,e[9]=d,e[10]=h,e[11]=0,e[12]=a,e[13]=o,e[14]=i,e[15]=1,e}function jt(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function St(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function It(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function Ot(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function Ft(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Nt(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function Vt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Xt(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],d=e[9],h=e[10],m=e[11],_=e[12],v=e[13],b=e[14],p=e[15],x=t[0],g=t[1],M=t[2],R=t[3],E=t[4],C=t[5],A=t[6],T=t[7],L=t[8],y=t[9],G=t[10],w=t[11],B=t[12],P=t[13],U=t[14],D=t[15];return Math.abs(r-x)<=f*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-g)<=f*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-M)<=f*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-R)<=f*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(i-E)<=f*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-C)<=f*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(u-A)<=f*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-T)<=f*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(l-L)<=f*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(d-y)<=f*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(h-G)<=f*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(m-w)<=f*Math.max(1,Math.abs(m),Math.abs(w))&&Math.abs(_-B)<=f*Math.max(1,Math.abs(_),Math.abs(B))&&Math.abs(v-P)<=f*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(b-U)<=f*Math.max(1,Math.abs(b),Math.abs(U))&&Math.abs(p-D)<=f*Math.max(1,Math.abs(p),Math.abs(D))}var Yt=ot,zt=Ot;function qt(){var e=new m(3);return m!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function kt(e){var t=new m(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Kt(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function Ht(e,t,r){var n=new m(3);return n[0]=e,n[1]=t,n[2]=r,n}function $t(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Zt(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function Qt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Jt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function er(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function tr(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function rr(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function nr(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function ar(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function or(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function ir(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function sr(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function ur(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function cr(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.hypot(r,n,a)}function lr(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}function dr(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function hr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function fr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function mr(e,t){var r=t[0],n=t[1],a=t[2],o=r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function _r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vr(e,t,r){var n=t[0],a=t[1],o=t[2],i=r[0],s=r[1],u=r[2];return e[0]=a*u-o*s,e[1]=o*i-n*u,e[2]=n*s-a*i,e}function br(e,t,r,n){var a=t[0],o=t[1],i=t[2];return e[0]=a+n*(r[0]-a),e[1]=o+n*(r[1]-o),e[2]=i+n*(r[2]-i),e}function pr(e,t,r,n,a,o){var i=o*o,s=i*(2*o-3)+1,u=i*(o-2)+o,c=i*(o-1),l=i*(3-2*o);return e[0]=t[0]*s+r[0]*u+n[0]*c+a[0]*l,e[1]=t[1]*s+r[1]*u+n[1]*c+a[1]*l,e[2]=t[2]*s+r[2]*u+n[2]*c+a[2]*l,e}function xr(e,t,r,n,a,o){var i=1-o,s=i*i,u=o*o,c=s*i,l=3*o*s,d=3*u*i,h=u*o;return e[0]=t[0]*c+r[0]*l+n[0]*d+a[0]*h,e[1]=t[1]*c+r[1]*l+n[1]*d+a[1]*h,e[2]=t[2]*c+r[2]*l+n[2]*d+a[2]*h,e}function gr(e,t){t=t||1;var r=2*_()*Math.PI,n=2*_()-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e}function Mr(e,t,r){var n=t[0],a=t[1],o=t[2],i=r[3]*n+r[7]*a+r[11]*o+r[15];return i=i||1,e[0]=(r[0]*n+r[4]*a+r[8]*o+r[12])/i,e[1]=(r[1]*n+r[5]*a+r[9]*o+r[13])/i,e[2]=(r[2]*n+r[6]*a+r[10]*o+r[14])/i,e}function Rr(e,t,r){var n=t[0],a=t[1],o=t[2];return e[0]=n*r[0]+a*r[3]+o*r[6],e[1]=n*r[1]+a*r[4]+o*r[7],e[2]=n*r[2]+a*r[5]+o*r[8],e}function Er(e,t,r){var n=r[0],a=r[1],o=r[2],i=r[3],s=t[0],u=t[1],c=t[2],l=a*c-o*u,d=o*s-n*c,h=n*u-a*s,f=a*h-o*d,m=o*l-n*h,_=n*d-a*l,v=2*i;return l*=v,d*=v,h*=v,f*=2,m*=2,_*=2,e[0]=s+l+f,e[1]=u+d+m,e[2]=c+h+_,e}function Cr(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Ar(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Tr(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Lr(e,t){var r=e[0],n=e[1],a=e[2],o=t[0],i=t[1],s=t[2],u=Math.sqrt(r*r+n*n+a*a)*Math.sqrt(o*o+i*i+s*s),c=u&&_r(e,t)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function yr(e){return e[0]=0,e[1]=0,e[2]=0,e}function Gr(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function wr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Br(e,t){var r=e[0],n=e[1],a=e[2],o=t[0],i=t[1],s=t[2];return Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=f*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-s)<=f*Math.max(1,Math.abs(a),Math.abs(s))}var Pr,Ur=Jt,Dr=er,Wr=tr,jr=cr,Sr=lr,Ir=Kt,Or=dr,Fr=(Pr=qt(),function(e,t,r,n,a,o){var i,s;for(t||(t=3),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,i=r;i<s;i+=t)Pr[0]=e[i],Pr[1]=e[i+1],Pr[2]=e[i+2],a(Pr,Pr,o),e[i]=Pr[0],e[i+1]=Pr[1],e[i+2]=Pr[2];return e});function Nr(){var e=new m(4);return m!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Vr(e){var t=new m(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Xr(e,t,r,n){var a=new m(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function Yr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function zr(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e}function qr(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function kr(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function Kr(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function Hr(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function $r(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Zr(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Qr(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Jr(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function en(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function tn(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function rn(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function nn(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return Math.hypot(r,n,a,o)}function an(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return r*r+n*n+a*a+o*o}function on(e){var t=e[0],r=e[1],n=e[2],a=e[3];return Math.hypot(t,r,n,a)}function sn(e){var t=e[0],r=e[1],n=e[2],a=e[3];return t*t+r*r+n*n+a*a}function un(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function cn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function ln(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r*r+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i)),e[0]=r*i,e[1]=n*i,e[2]=a*i,e[3]=o*i,e}function dn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function hn(e,t,r,n){var a=r[0]*n[1]-r[1]*n[0],o=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],l=t[0],d=t[1],h=t[2],f=t[3];return e[0]=d*c-h*u+f*s,e[1]=-l*c+h*i-f*o,e[2]=l*u-d*i+f*a,e[3]=-l*s+d*o-h*a,e}function fn(e,t,r,n){var a=t[0],o=t[1],i=t[2],s=t[3];return e[0]=a+n*(r[0]-a),e[1]=o+n*(r[1]-o),e[2]=i+n*(r[2]-i),e[3]=s+n*(r[3]-s),e}function mn(e,t){var r,n,a,o,i,s;t=t||1;do{i=(r=2*_()-1)*r+(n=2*_()-1)*n}while(i>=1);do{s=(a=2*_()-1)*a+(o=2*_()-1)*o}while(s>=1);var u=Math.sqrt((1-i)/s);return e[0]=t*r,e[1]=t*n,e[2]=t*a*u,e[3]=t*o*u,e}function _n(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*o+r[12]*i,e[1]=r[1]*n+r[5]*a+r[9]*o+r[13]*i,e[2]=r[2]*n+r[6]*a+r[10]*o+r[14]*i,e[3]=r[3]*n+r[7]*a+r[11]*o+r[15]*i,e}function vn(e,t,r){var n=t[0],a=t[1],o=t[2],i=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*a,d=c*a+u*n-i*o,h=c*o+i*a-s*n,f=-i*n-s*a-u*o;return e[0]=l*c+f*-i+d*-u-h*-s,e[1]=d*c+f*-s+h*-i-l*-u,e[2]=h*c+f*-u+l*-s-d*-i,e[3]=t[3],e}function bn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function pn(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function xn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function gn(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-u)<=f*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-c)<=f*Math.max(1,Math.abs(o),Math.abs(c))}var Mn=kr,Rn=Kr,En=Hr,Cn=nn,An=an,Tn=on,Ln=sn,yn=function(){var e=Nr();return function(t,r,n,a,o,i){var s,u;for(r||(r=4),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function Gn(){var e=new m(4);return m!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function wn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Bn(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function Pn(e,t){var r=2*Math.acos(t[3]),n=Math.sin(r/2);return n>f?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function Un(e,t){var r=ua(e,t);return Math.acos(2*r*r-1)}function Dn(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+i*s+a*c-o*u,e[1]=a*l+i*u+o*s-n*c,e[2]=o*l+i*c+n*u-a*s,e[3]=i*l-n*s-a*u-o*c,e}function Wn(e,t,r){r*=.5;var n=t[0],a=t[1],o=t[2],i=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+i*s,e[1]=a*u+o*s,e[2]=o*u-a*s,e[3]=i*u-n*s,e}function jn(e,t,r){r*=.5;var n=t[0],a=t[1],o=t[2],i=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u-o*s,e[1]=a*u+i*s,e[2]=o*u+n*s,e[3]=i*u-a*s,e}function Sn(e,t,r){r*=.5;var n=t[0],a=t[1],o=t[2],i=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*s,e[1]=a*u-n*s,e[2]=o*u+i*s,e[3]=i*u-o*s,e}function In(e,t){var r=t[0],n=t[1],a=t[2];return e[0]=r,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),e}function On(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=Math.sqrt(r*r+n*n+a*a),s=Math.exp(o),u=i>0?s*Math.sin(i)/i:0;return e[0]=r*u,e[1]=n*u,e[2]=a*u,e[3]=s*Math.cos(i),e}function Fn(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=Math.sqrt(r*r+n*n+a*a),s=i>0?Math.atan2(i,o)/i:0;return e[0]=r*s,e[1]=n*s,e[2]=a*s,e[3]=.5*Math.log(r*r+n*n+a*a+o*o),e}function Nn(e,t,r){return Fn(e,t),sa(e,e,r),On(e,e),e}function Vn(e,t,r,n){var a,o,i,s,u,c=t[0],l=t[1],d=t[2],h=t[3],m=r[0],_=r[1],v=r[2],b=r[3];return(o=c*m+l*_+d*v+h*b)<0&&(o=-o,m=-m,_=-_,v=-v,b=-b),1-o>f?(a=Math.acos(o),i=Math.sin(a),s=Math.sin((1-n)*a)/i,u=Math.sin(n*a)/i):(s=1-n,u=n),e[0]=s*c+u*m,e[1]=s*l+u*_,e[2]=s*d+u*v,e[3]=s*h+u*b,e}function Xn(e){var t=_(),r=_(),n=_(),a=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=o*Math.sin(2*Math.PI*n),e[3]=o*Math.cos(2*Math.PI*n),e}function Yn(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r*r+n*n+a*a+o*o,s=i?1/i:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-a*s,e[3]=o*s,e}function zn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function qn(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(t[3*a+a]-t[3*o+o]-t[3*i+i]+1),e[a]=.5*r,r=.5/r,e[3]=(t[3*o+i]-t[3*i+o])*r,e[o]=(t[3*o+a]+t[3*a+o])*r,e[i]=(t[3*i+a]+t[3*a+i])*r}return e}function kn(e,t,r,n){var a=.5*Math.PI/180;t*=a,r*=a,n*=a;var o=Math.sin(t),i=Math.cos(t),s=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return e[0]=o*u*l-i*s*c,e[1]=i*s*l+o*u*c,e[2]=i*u*c-o*s*l,e[3]=i*u*l+o*s*c,e}function Kn(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Hn,$n,Zn,Qn,Jn,ea,ta=Vr,ra=Xr,na=Yr,aa=zr,oa=qr,ia=Dn,sa=tn,ua=dn,ca=fn,la=on,da=la,ha=sn,fa=ha,ma=ln,_a=xn,va=gn,ba=(Hn=qt(),$n=Ht(1,0,0),Zn=Ht(0,1,0),function(e,t,r){var n=_r(t,r);return n<-.999999?(vr(Hn,$n,t),Ir(Hn)<1e-6&&vr(Hn,Zn,t),mr(Hn,Hn),Bn(e,Hn,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(vr(Hn,t,r),e[0]=Hn[0],e[1]=Hn[1],e[2]=Hn[2],e[3]=1+n,ma(e,e))}),pa=(Qn=Gn(),Jn=Gn(),function(e,t,r,n,a,o){return Vn(Qn,t,a,o),Vn(Jn,r,n,o),Vn(e,Qn,Jn,2*o*(1-o)),e}),xa=(ea=be(),function(e,t,r,n){return ea[0]=r[0],ea[3]=r[1],ea[6]=r[2],ea[1]=n[0],ea[4]=n[1],ea[7]=n[2],ea[2]=-t[0],ea[5]=-t[1],ea[8]=-t[2],ma(e,qn(e,ea))});function ga(){var e=new m(8);return m!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function Ma(e){var t=new m(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Ra(e,t,r,n,a,o,i,s){var u=new m(8);return u[0]=e,u[1]=t,u[2]=r,u[3]=n,u[4]=a,u[5]=o,u[6]=i,u[7]=s,u}function Ea(e,t,r,n,a,o,i){var s=new m(8);s[0]=e,s[1]=t,s[2]=r,s[3]=n;var u=.5*a,c=.5*o,l=.5*i;return s[4]=u*n+c*r-l*t,s[5]=c*n+l*e-u*r,s[6]=l*n+u*t-c*e,s[7]=-u*e-c*t-l*r,s}function Ca(e,t,r){var n=.5*r[0],a=.5*r[1],o=.5*r[2],i=t[0],s=t[1],u=t[2],c=t[3];return e[0]=i,e[1]=s,e[2]=u,e[3]=c,e[4]=n*c+a*u-o*s,e[5]=a*c+o*i-n*u,e[6]=o*c+n*s-a*i,e[7]=-n*i-a*s-o*u,e}function Aa(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function Ta(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function La(e,t){var r=Gn();Rt(r,t);var n=new m(3);return gt(n,t),Ca(e,r,n),e}function ya(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Ga(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function wa(e,t,r,n,a,o,i,s,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=i,e[6]=s,e[7]=u,e}var Ba=na;function Pa(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var Ua=na;function Da(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Wa(e,t){var r=t[4],n=t[5],a=t[6],o=t[7],i=-t[0],s=-t[1],u=-t[2],c=t[3];return e[0]=2*(r*c+o*i+n*u-a*s),e[1]=2*(n*c+o*s+a*i-r*u),e[2]=2*(a*c+o*u+r*s-n*i),e}function ja(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=.5*r[0],u=.5*r[1],c=.5*r[2],l=t[4],d=t[5],h=t[6],f=t[7];return e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=i*s+a*c-o*u+l,e[5]=i*u+o*s-n*c+d,e[6]=i*c+n*u-a*s+h,e[7]=-n*s-a*u-o*c+f,e}function Sa(e,t,r){var n=-t[0],a=-t[1],o=-t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=s*i+l*n+u*o-c*a,h=u*i+l*a+c*n-s*o,f=c*i+l*o+s*a-u*n,m=l*i-s*n-u*a-c*o;return Wn(e,t,r),n=e[0],a=e[1],o=e[2],i=e[3],e[4]=d*i+m*n+h*o-f*a,e[5]=h*i+m*a+f*n-d*o,e[6]=f*i+m*o+d*a-h*n,e[7]=m*i-d*n-h*a-f*o,e}function Ia(e,t,r){var n=-t[0],a=-t[1],o=-t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=s*i+l*n+u*o-c*a,h=u*i+l*a+c*n-s*o,f=c*i+l*o+s*a-u*n,m=l*i-s*n-u*a-c*o;return jn(e,t,r),n=e[0],a=e[1],o=e[2],i=e[3],e[4]=d*i+m*n+h*o-f*a,e[5]=h*i+m*a+f*n-d*o,e[6]=f*i+m*o+d*a-h*n,e[7]=m*i-d*n-h*a-f*o,e}function Oa(e,t,r){var n=-t[0],a=-t[1],o=-t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=s*i+l*n+u*o-c*a,h=u*i+l*a+c*n-s*o,f=c*i+l*o+s*a-u*n,m=l*i-s*n-u*a-c*o;return Sn(e,t,r),n=e[0],a=e[1],o=e[2],i=e[3],e[4]=d*i+m*n+h*o-f*a,e[5]=h*i+m*a+f*n-d*o,e[6]=f*i+m*o+d*a-h*n,e[7]=m*i-d*n-h*a-f*o,e}function Fa(e,t,r){var n=r[0],a=r[1],o=r[2],i=r[3],s=t[0],u=t[1],c=t[2],l=t[3];return e[0]=s*i+l*n+u*o-c*a,e[1]=u*i+l*a+c*n-s*o,e[2]=c*i+l*o+s*a-u*n,e[3]=l*i-s*n-u*a-c*o,s=t[4],u=t[5],c=t[6],l=t[7],e[4]=s*i+l*n+u*o-c*a,e[5]=u*i+l*a+c*n-s*o,e[6]=c*i+l*o+s*a-u*n,e[7]=l*i-s*n-u*a-c*o,e}function Na(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+i*s+a*c-o*u,e[1]=a*l+i*u+o*s-n*c,e[2]=o*l+i*c+n*u-a*s,e[3]=i*l-n*s-a*u-o*c,s=r[4],u=r[5],c=r[6],l=r[7],e[4]=n*l+i*s+a*c-o*u,e[5]=a*l+i*u+o*s-n*c,e[6]=o*l+i*c+n*u-a*s,e[7]=i*l-n*s-a*u-o*c,e}function Va(e,t,r,n){if(Math.abs(n)<f)return ya(e,t);var a=Math.hypot(r[0],r[1],r[2]);n*=.5;var o=Math.sin(n),i=o*r[0]/a,s=o*r[1]/a,u=o*r[2]/a,c=Math.cos(n),l=t[0],d=t[1],h=t[2],m=t[3];e[0]=l*c+m*i+d*u-h*s,e[1]=d*c+m*s+h*i-l*u,e[2]=h*c+m*u+l*s-d*i,e[3]=m*c-l*i-d*s-h*u;var _=t[4],v=t[5],b=t[6],p=t[7];return e[4]=_*c+p*i+v*u-b*s,e[5]=v*c+p*s+b*i-_*u,e[6]=b*c+p*u+_*s-v*i,e[7]=p*c-_*i-v*s-b*u,e}function Xa(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function Ya(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],s=r[4],u=r[5],c=r[6],l=r[7],d=t[4],h=t[5],f=t[6],m=t[7],_=r[0],v=r[1],b=r[2],p=r[3];return e[0]=n*p+i*_+a*b-o*v,e[1]=a*p+i*v+o*_-n*b,e[2]=o*p+i*b+n*v-a*_,e[3]=i*p-n*_-a*v-o*b,e[4]=n*l+i*s+a*c-o*u+d*p+m*_+h*b-f*v,e[5]=a*l+i*u+o*s-n*c+h*p+m*v+f*_-d*b,e[6]=o*l+i*c+n*u-a*s+f*p+m*b+d*v-h*_,e[7]=i*l-n*s-a*u-o*c+m*p-d*_-h*v-f*b,e}var za=Ya;function qa(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var ka=ua;function Ka(e,t,r,n){var a=1-n;return ka(t,r)<0&&(n=-n),e[0]=t[0]*a+r[0]*n,e[1]=t[1]*a+r[1]*n,e[2]=t[2]*a+r[2]*n,e[3]=t[3]*a+r[3]*n,e[4]=t[4]*a+r[4]*n,e[5]=t[5]*a+r[5]*n,e[6]=t[6]*a+r[6]*n,e[7]=t[7]*a+r[7]*n,e}function Ha(e,t){var r=Ja(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function $a(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Za=la,Qa=Za,Ja=ha,eo=Ja;function to(e,t){var r=Ja(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,a=t[1]/r,o=t[2]/r,i=t[3]/r,s=t[4],u=t[5],c=t[6],l=t[7],d=n*s+a*u+o*c+i*l;e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=(s-n*d)/r,e[5]=(u-a*d)/r,e[6]=(c-o*d)/r,e[7]=(l-i*d)/r}return e}function ro(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function no(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function ao(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=t[0],d=t[1],h=t[2],m=t[3],_=t[4],v=t[5],b=t[6],p=t[7];return Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-m)<=f*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(i-_)<=f*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-v)<=f*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-b)<=f*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-p)<=f*Math.max(1,Math.abs(c),Math.abs(p))}function oo(){var e=new m(2);return m!=Float32Array&&(e[0]=0,e[1]=0),e}function io(e){var t=new m(2);return t[0]=e[0],t[1]=e[1],t}function so(e,t){var r=new m(2);return r[0]=e,r[1]=t,r}function uo(e,t){return e[0]=t[0],e[1]=t[1],e}function co(e,t,r){return e[0]=t,e[1]=r,e}function lo(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function ho(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function fo(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function mo(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function _o(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function vo(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function bo(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function po(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function xo(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function go(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Mo(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function Ro(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)}function Eo(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function Co(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function Ao(e){var t=e[0],r=e[1];return t*t+r*r}function To(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Lo(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function yo(e,t){var r=t[0],n=t[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function Go(e,t){return e[0]*t[0]+e[1]*t[1]}function wo(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function Bo(e,t,r,n){var a=t[0],o=t[1];return e[0]=a+n*(r[0]-a),e[1]=o+n*(r[1]-o),e}function Po(e,t){t=t||1;var r=2*_()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function Uo(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a,e[1]=r[1]*n+r[3]*a,e}function Do(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a+r[4],e[1]=r[1]*n+r[3]*a+r[5],e}function Wo(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[3]*a+r[6],e[1]=r[1]*n+r[4]*a+r[7],e}function jo(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[4]*a+r[12],e[1]=r[1]*n+r[5]*a+r[13],e}function So(e,t,r,n){var a=t[0]-r[0],o=t[1]-r[1],i=Math.sin(n),s=Math.cos(n);return e[0]=a*s-o*i+r[0],e[1]=a*i+o*s+r[1],e}function Io(e,t){var r=e[0],n=e[1],a=t[0],o=t[1],i=Math.sqrt(r*r+n*n)*Math.sqrt(a*a+o*o),s=i&&(r*a+n*o)/i;return Math.acos(Math.min(Math.max(s,-1),1))}function Oo(e){return e[0]=0,e[1]=0,e}function Fo(e){return"vec2("+e[0]+", "+e[1]+")"}function No(e,t){return e[0]===t[0]&&e[1]===t[1]}function Vo(e,t){var r=e[0],n=e[1],a=t[0],o=t[1];return Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))}var Xo=Co,Yo=ho,zo=fo,qo=mo,ko=Ro,Ko=Eo,Ho=Ao,$o=function(){var e=oo();return function(t,r,n,a,o,i){var s,u;for(r||(r=2),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,i),t[s]=e[0],t[s+1]=e[1];return t}}()},201:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nuniform vec3 u_light_position;\r\n\r\nin vec2 f_text_coord;\r\nin vec3 f_normal;\r\nout vec4 outColor;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nvoid main(){\r\n  outColor = vec4( dot(f_normal.xyz, u_light_position) * texture(u_texture, f_text_coord).rgb, 1.0);\r\n}"},432:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\n// Vertex attributes\r\nlayout( location=0 ) in vec4 position;\r\nlayout( location=1 ) in vec3 normal;\r\nlayout( location=2 ) in vec2 text_coord;\r\n\r\nout vec2 f_text_coord;\r\nout vec3 f_normal;\r\n\r\n// Aplica perspectiva para os pontos\r\nuniform mat4x4 projection;\r\n\r\n// Transforma um ponto do mundo para o sistema de coordenadas da camera\r\nuniform mat4x4 view;\r\n\r\n// Coordenadas do modelo, aplicado as transformacoes de translacao,\r\n// rotacao e escala (o que posiciona o objeto no mundo).\r\nuniform mat4x4 model;\r\n\r\nvoid main() {\r\n  gl_Position = projection * view * model * position;\r\n  f_text_coord = text_coord;\r\n  f_normal = mat3(transpose(inverse(model))) * normal;\r\n}"},905:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nin vec2 f_text_coord;\r\nin vec4 f_normal;\r\nout vec4 outColor;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nvoid main(){\r\n  outColor = texture(u_texture, f_text_coord);\r\n}"},113:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\n// Vertex attributes\r\nlayout( location=0 ) in vec4 position;\r\nlayout( location=1 ) in vec4 normal;\r\nlayout( location=2 ) in vec2 text_coord;\r\n\r\nout vec2 f_text_coord;\r\nout vec4 f_normal;\r\n\r\n// Aplica perspectiva para os pontos\r\nuniform mat4x4 projection;\r\n\r\n// Transforma um ponto do mundo para o sistema de coordenadas da camera\r\nuniform mat4x4 view;\r\n\r\n// Coordenadas do modelo, aplicado as transformacoes de translacao,\r\n// rotacao e escala (o que posiciona o objeto no mundo).\r\nuniform mat4x4 model;\r\n\r\nvoid main() {\r\n  gl_Position = projection * view * model * position;\r\n  f_text_coord = text_coord;\r\n  f_normal = normal;\r\n}"},536:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nuniform vec4 color;\r\nout vec4 outColor;\r\n\r\nvoid main(){\r\n  outColor = color;\r\n}"},448:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nin vec2 f_text_coord;\r\nin vec4 f_normal;\r\nout vec4 outColor;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nvoid main(){\r\n  outColor = texture(u_texture, f_text_coord);\r\n}"},747:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\n// Vertex attributes\r\nlayout( location=0 ) in vec4 position;\r\nlayout( location=1 ) in vec4 normal;\r\nlayout( location=2 ) in vec2 text_coord;\r\n\r\nout vec2 f_text_coord;\r\nout vec4 f_normal;\r\n\r\n// Aplica perspectiva para os pontos\r\nuniform mat4x4 projection;\r\n\r\n// Transforma um ponto do mundo para o sistema de coordenadas da camera\r\nuniform mat4x4 view;\r\n\r\n// Coordenadas do modelo, aplicado as transformacoes de translacao,\r\n// rotacao e escala (o que posiciona o objeto no mundo).\r\nuniform mat4x4 model;\r\n\r\nvoid main() {\r\n  gl_Position = projection * view * model * position;\r\n  f_text_coord = text_coord;\r\n  f_normal = normal;\r\n}"},194:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nin vec2 f_text_coord;\r\nin vec4 f_normal;\r\nout vec4 outColor;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nvoid main(){\r\n  outColor = texture(u_texture, f_text_coord);\r\n}"},532:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\n// Vertex attributes\r\nlayout( location=0 ) in vec4 position;\r\nlayout( location=1 ) in vec4 normal;\r\nlayout( location=2 ) in vec2 text_coord;\r\n\r\nout vec2 f_text_coord;\r\nout vec4 f_normal;\r\n\r\n// Aplica perspectiva para os pontos\r\nuniform mat4x4 projection;\r\n\r\n// Transforma um ponto do mundo para o sistema de coordenadas da camera\r\nuniform mat4x4 view;\r\n\r\n// Coordenadas do modelo, aplicado as transformacoes de translacao,\r\n// rotacao e escala (o que posiciona o objeto no mundo).\r\nuniform mat4x4 model;\r\n\r\nvoid main() {\r\n  gl_Position = projection * view * model * position;\r\n  f_text_coord = text_coord;\r\n  f_normal = normal;\r\n}"},254:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\n// Vertex attributes\r\nlayout( location=0 ) in vec4 position;\r\n\r\n// Aplica perspectiva para os pontos\r\nuniform mat4x4 projection;\r\n\r\n// Transforma um ponto do mundo para o sistema de coordenadas da camera\r\nuniform mat4x4 view;\r\n\r\n// Coordenadas do modelo, aplicado as transformacoes de translacao,\r\n// rotacao e escala (o que posiciona o objeto no mundo).\r\nuniform mat4x4 model;\r\n\r\nvoid main() {\r\n  gl_Position = projection * view * model * position;\r\n  gl_PointSize = 15.0;\r\n}"},565:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nin vec2 f_text_coord;\r\nout vec4 outColor;\r\n\r\nuniform sampler2D u_texture;\r\n\r\nvoid main(){\r\n  outColor = texture(u_texture, f_text_coord);\r\n}"},690:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\n// Vertex attributes\r\nlayout( location=0 ) in vec4 position;\r\nlayout( location=1 ) in vec4 normal;\r\nlayout( location=2 ) in vec2 text_coord;\r\n\r\nout vec2 f_text_coord;\r\nout vec4 f_normal;\r\n\r\n// Aplica perspectiva para os pontos\r\nuniform mat4x4 projection;\r\n\r\n// Transforma um ponto do mundo para o sistema de coordenadas da camera\r\nuniform mat4x4 view;\r\n\r\n// Coordenadas do modelo, aplicado as transformacoes de translacao,\r\n// rotacao e escala (o que posiciona o objeto no mundo).\r\nuniform mat4x4 model;\r\n\r\nvoid main() {\r\n  gl_Position = projection * view * model * position;\r\n  f_text_coord = text_coord;\r\n  f_normal = normal;\r\n}"},277:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CubicBezierCurve=void 0;const i=o(r(887));t.CubicBezierCurve=class{constructor(e,t,r,n){this.control_points=new Array(e,t,r,n),this.coeff_vector=[i.vec3.create(),i.vec3.create(),i.vec3.create(),i.vec3.create()],this.calcCoeffVector(e,t,r,n)}calcCoeffVector(e,t,r,n){const a=i.vec3.create();i.vec3.scaleAndAdd(a,a,e,1),i.vec3.scaleAndAdd(a,a,t,0),i.vec3.scaleAndAdd(a,a,r,0),i.vec3.scaleAndAdd(a,a,n,0),this.coeff_vector[0]=i.vec3.clone(a),i.vec3.zero(a),i.vec3.scaleAndAdd(a,a,e,-3),i.vec3.scaleAndAdd(a,a,t,3),i.vec3.scaleAndAdd(a,a,r,0),i.vec3.scaleAndAdd(a,a,n,0),this.coeff_vector[1]=i.vec3.clone(a),i.vec3.zero(a),i.vec3.scaleAndAdd(a,a,e,3),i.vec3.scaleAndAdd(a,a,t,-6),i.vec3.scaleAndAdd(a,a,r,3),i.vec3.scaleAndAdd(a,a,n,0),this.coeff_vector[2]=i.vec3.clone(a),i.vec3.zero(a),i.vec3.scaleAndAdd(a,a,e,-1),i.vec3.scaleAndAdd(a,a,t,3),i.vec3.scaleAndAdd(a,a,r,-3),i.vec3.scaleAndAdd(a,a,n,1),this.coeff_vector[3]=i.vec3.clone(a),i.vec3.zero(a)}getPoint(e){const t=Math.pow(e,0),r=Math.pow(e,1),n=Math.pow(e,2),a=Math.pow(e,3),o=i.vec3.create();return i.vec3.scaleAndAdd(o,o,this.coeff_vector[0],t),i.vec3.scaleAndAdd(o,o,this.coeff_vector[1],r),i.vec3.scaleAndAdd(o,o,this.coeff_vector[2],n),i.vec3.scaleAndAdd(o,o,this.coeff_vector[3],a),o}getPointTangent(e){const t=this.getPoint(e),r=this.getVectorTangent(e);return i.vec3.add(i.vec3.create(),t,r)}getVectorTangent(e){const t=Math.pow(e,0),r=Math.pow(e,1),n=Math.pow(e,2),a=i.vec3.create();return i.vec3.scaleAndAdd(a,a,this.coeff_vector[0],0),i.vec3.scaleAndAdd(a,a,this.coeff_vector[1],t),i.vec3.scaleAndAdd(a,a,this.coeff_vector[2],r),i.vec3.scaleAndAdd(a,a,this.coeff_vector[3],n),a}changeControlPoint(e,t){e<0||e>=this.control_points.length||(this.control_points[e]=t,this.calcCoeffVector(this.control_points[0],this.control_points[1],this.control_points[2],this.control_points[3]))}getControlPointByIndex(e){return e<0||e>=this.control_points.length?null:this.control_points[e]}get getControlPoints(){return this.control_points}}},334:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Spline=void 0;const i=o(r(887)),s=r(277);class u{constructor(e=128){this.num_points_per_curve=e,this.curves=new Array,this.array_points=new Array(e)}addCurve(e){this.curves.push(e)}getPoint(e){const t=Math.abs(e)%1*this.curves.length,r=Math.floor(t),n=t-r;return this.curves[r].getPoint(n)}getVectorTangent(e){const t=Math.abs(e)%1*this.curves.length,r=Math.floor(t),n=t-r;return this.curves[r].getVectorTangent(n)}getPointTangent(e){const t=Math.abs(e)%1*this.curves.length,r=Math.floor(t),n=t-r;return this.curves[r].getPointTangent(n)}sampleSpline(){const e=1/this.num_points_per_curve;this.curves.forEach(((t,r)=>{let n=0;for(let a=0;a<this.num_points_per_curve;++a)this.array_points[a+this.num_points_per_curve*r]=t.getPoint(n),n+=e;this.array_points[this.num_points_per_curve-1+this.num_points_per_curve*r]=this.curves[r].getPoint(1)}))}getCurveByIndex(e){return e<0||e>=this.curves.length?null:this.curves[e]}updateCurve(e,t){if(e<0||e>=this.curves.length)return;this.curves[e]=t;const r=1/this.num_points_per_curve;let n=0;for(let t=0;t<this.num_points_per_curve;++t)this.array_points[t+this.num_points_per_curve*e]=this.curves[e].getPoint(n),n+=r;this.array_points[this.num_points_per_curve-1+this.num_points_per_curve*e]=this.curves[e].getPoint(1)}updatePoint(e,t){if(e<0||e>=4*this.curves.length)return!1;const r=Math.floor(e/4),n=e-4*r,a=this.curves[r];return a.changeControlPoint(n,t),this.updateCurve(r,a),!0}indexControlPoint(e=.1,t){for(let r=this.curves.length-1;r>=0;--r)for(let n=0;n<4;++n)if(i.vec3.dist(t,this.curves[r].getControlPoints[n])<=e)return 4*r+n;return-1}get getNumCurvesInSpline(){return this.curves.length}isC0Continuous(){for(let e=0;e<this.curves.length-1;++e)if(!i.vec3.equals(this.curves[e].getControlPoints[3],this.curves[e+1].getControlPoints[0]))return!1;return!0}turnC0Continuous(){if(!(this.curves.length<=1)){for(let e=0;e<this.curves.length-1;++e){const t=this.curves[e];this.curves[e+1].changeControlPoint(0,t.getControlPointByIndex(3))}this.sampleSpline()}}turnC1Continuous(){if(!(this.curves.length<=1)){for(let e=0;e<this.curves.length-1;++e){const t=this.curves[e],r=this.curves[e+1],n=i.vec3.create();i.vec3.sub(n,t.getControlPointByIndex(3),t.getControlPointByIndex(2)),i.vec3.add(n,t.getControlPointByIndex(3),n),r.changeControlPoint(0,t.getControlPointByIndex(3)),r.changeControlPoint(1,n)}this.sampleSpline()}}turnC2Continuous(){if(!(this.curves.length<=1)){for(let e=0;e<this.curves.length-1;++e){const t=this.curves[e],r=this.curves[e+1],n=i.vec3.create();i.vec3.sub(n,t.getControlPointByIndex(3),t.getControlPointByIndex(2)),i.vec3.add(n,t.getControlPointByIndex(3),n),r.changeControlPoint(0,t.getControlPointByIndex(3)),r.changeControlPoint(1,n),i.vec3.scaleAndAdd(n,t.getControlPointByIndex(1),n,4),r.changeControlPoint(2,n)}this.sampleSpline()}}turnG0Continuous(){this.turnC0Continuous()}turnG1Continuous(){if(!(this.curves.length<=1)){for(let e=0;e<this.curves.length-1;++e){const t=this.curves[e],r=this.curves[e+1],n=i.vec3.create();i.vec3.sub(n,t.getControlPointByIndex(3),t.getControlPointByIndex(2)),i.vec3.normalize(n,n);const a=i.vec3.create();i.vec3.sub(a,r.getControlPointByIndex(1),r.getControlPointByIndex(0)),i.vec3.scaleAndAdd(n,t.getControlPointByIndex(3),n,i.vec3.len(a)),r.changeControlPoint(0,t.getControlPointByIndex(3)),r.changeControlPoint(1,n)}this.sampleSpline()}}turnG2Continuous(){}toOBJ(){let e="";for(let t=0;t<this.curves.length;++t)for(let r=0;r<4;++r){const n=this.curves[t].getControlPoints[r];e+=`v ${n[0]} ${n[1]} ${n[2]}\n`}return e}static fromOBJ(e,t=128){let r=new u(t);const n=new Array;new Array,e.split("\n").forEach((e=>{if("v"==e[0]){const t=e.split(" ");if(4==t.length){let e=i.vec3.fromValues(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));n.push(e)}}}));for(let e=0;e<n.length/4&&!(e+3>=n.length);++e){const t=new s.CubicBezierCurve(n[4*e+0],n[4*e+1],n[4*e+2],n[4*e+3]);r.addCurve(t)}return r}get getPointsInSpline(){return this.array_points}set setNumPoints(e){this.num_points_per_curve=e,this.sampleSpline()}}t.Spline=u},957:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AWM=void 0;const s=o(r(887)),u=r(916),c=i(r(432)),l=i(r(201));class d{constructor(e,t){this.paused_animation=!1,this.model=s.mat4.create(),s.mat4.translate(this.model,this.model,[0,3,20]),this.virus_aiming=t,d.initialized||this.setup(e),d.initialized=!0}updateAnimation(e){if(!this.paused_animation){const e=s.mat4.targetTo(s.mat4.create(),s.vec3.fromValues(this.model[12],this.model[13],this.model[14]),s.vec3.fromValues(this.virus_aiming.model[12],this.virus_aiming.model[13],this.virus_aiming.model[14]),s.vec3.fromValues(0,1,0));s.mat4.multiply(this.model,s.mat4.create(),e)}}resetAnimation(){}toggleAnimation(){this.paused_animation=!this.paused_animation}pauseAnimation(){this.paused_animation=!0}resumeAnimation(){this.paused_animation=!1}draw(e,t,r){e.useProgram(d.program),e.bindVertexArray(d.vao),e.uniformMatrix4fv(d.u_model,!1,this.model),e.uniformMatrix4fv(d.u_view,!1,t),e.uniformMatrix4fv(d.u_projection,!1,r),e.uniform3f(d.u_light_position,.707,.707,0),d.objects_mtl_ranges.forEach(((t,r)=>{switch(t.material){case"Gun_Body":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_body);break;case"Gun_Magazine":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_magazine);break;case"Gun_Rear":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_rear);break;case"Gun_Rifle":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_rifle);break;case"Gun_Scope":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_scope);break;case"Metal_Grey":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_metal_grey);break;case"Scope_Front_Glass":case"Scope_Rear_Glass":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_scope_glass)}e.drawArrays(WebGL2RenderingContext.TRIANGLES,r[0],r[1])})),e.bindVertexArray(null)}setup(e){d.program=u.WebGLUtils.createProgram(e,u.WebGLUtils.createShader(e,WebGL2RenderingContext.VERTEX_SHADER,c.default),u.WebGLUtils.createShader(e,WebGL2RenderingContext.FRAGMENT_SHADER,l.default)),e.useProgram(d.program),d.u_model=e.getUniformLocation(d.program,"model"),d.u_view=e.getUniformLocation(d.program,"view"),d.u_projection=e.getUniformLocation(d.program,"projection"),d.u_light_position=e.getUniformLocation(d.program,"u_light_position"),d.a_position=e.getAttribLocation(d.program,"position"),d.a_normal=e.getAttribLocation(d.program,"normal"),d.a_text_coord=e.getAttribLocation(d.program,"text_coord"),d.buffer_vertices=e.createBuffer(),d.texture_metal_grey=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_metal_grey),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,128,128,128])),d.texture_scope_glass=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_scope_glass),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([0,128,128,0])),d.texture_sniper_body=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_body),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([255,0,128,255])),d.texture_sniper_magazine=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_magazine),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,128,0,255])),d.texture_sniper_rear=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_rear),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),d.texture_sniper_rifle=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_rifle),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([64,128,255,255])),d.texture_sniper_scope=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_scope),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([0,255,64,255])),d.vao=e.createVertexArray(),e.bindVertexArray(d.vao),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.enableVertexAttribArray(d.a_position),e.enableVertexAttribArray(d.a_normal),e.enableVertexAttribArray(d.a_text_coord),e.vertexAttribPointer(d.a_position,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_normal,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_text_coord,2,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,6*Float32Array.BYTES_PER_ELEMENT),e.bindVertexArray(null),u.WebGLUtils.readObj("./objects/AWM/AWM.obj").then((t=>{const r=new Float32Array(8*t.index_vertices.length);for(let e=0;e<t.index_vertices.length;++e){const n=t.vertices[t.index_vertices[e]],a=t.normals[t.index_normals[e]],o=t.texture_cordinates[t.index_texture_cordinates[e]];r[8*e+0]=n[0],r[8*e+1]=n[1],r[8*e+2]=n[2],r[8*e+3]=a[0],r[8*e+4]=a[1],r[8*e+5]=a[2],r[8*e+6]=null==o?0:o[0],r[8*e+7]=null==o?0:o[1]}e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,r,WebGL2RenderingContext.STATIC_DRAW),d.vertices=t.index_vertices.length,d.objects_mtl_ranges=t.objects_ranges})),fetch("objects/AWM/MetalGreyTexture.jpg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_metal_grey),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/AWM/ScopeGlassTexture.png").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_scope_glass),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/AWM/SniperBodyTexture.png").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_body),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/AWM/SniperMagazineTexture.jpg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_magazine),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/AWM/SniperRearTexture.jpg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_rear),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/AWM/SniperRifleTexture.png").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_rifle),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/AWM/SniperScopeTexture.jpg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_sniper_scope),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)}))}}t.AWM=d,d.initialized=!1,d.vertices=0,d.objects_mtl_ranges=new Map},409:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Cabin=void 0;const s=o(r(887)),u=r(916),c=i(r(113)),l=i(r(905));class d{constructor(e){this.model=s.mat4.create(),s.mat4.rotate(this.model,this.model,-Math.PI/5,[0,1,0]),s.mat4.translate(this.model,this.model,[16,0,-51]),s.mat4.scale(this.model,this.model,[1.25,1.25,1.25]),d.initialized||this.setup(e),d.initialized=!0}draw(e,t,r){e.useProgram(d.program),e.bindVertexArray(d.vao),e.uniformMatrix4fv(d.u_model,!1,this.model),e.uniformMatrix4fv(d.u_view,!1,t),e.uniformMatrix4fv(d.u_projection,!1,r),d.objects_mtl_ranges.forEach(((t,r)=>{switch(t.material){case"Material.001":case"Material.002":case"Material.003":case"Material.004":case"Material.005":case"Material.006":case"Material.007":case"Material.008":case"Material.009":case"Material.010":case"Material.011":case"Material.012":case"Material.013":case"Material.015":case"Material.017":case"Material.018":case"Material.019":case"Material.024":case"Material.027":case"Material.029":case"Material.030":case"Material.032":case"Material.033":case"Material.034":case"Material.035":case"Material.036":case"Material.037":case"Material.038":case"Material.039":case"Material.040":case"Material.041":case"Material.042":case"Material.043":case"Material.046":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_rough_wood);break;case"Material.016":case"Material.020":case"Material.021":case"Material.022":case"Material.023":case"Material.025":case"Material.026":case"Material.031":case"Material.044":case"Material.045":case"Material.047":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_bark_willow);break;case"Material.028":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_reed_roof)}e.drawArrays(WebGL2RenderingContext.TRIANGLES,r[0],r[1])})),e.bindVertexArray(null)}setup(e){d.program=u.WebGLUtils.createProgram(e,u.WebGLUtils.createShader(e,WebGL2RenderingContext.VERTEX_SHADER,c.default),u.WebGLUtils.createShader(e,WebGL2RenderingContext.FRAGMENT_SHADER,l.default)),e.useProgram(d.program),d.u_model=e.getUniformLocation(d.program,"model"),d.u_view=e.getUniformLocation(d.program,"view"),d.u_projection=e.getUniformLocation(d.program,"projection"),d.a_position=e.getAttribLocation(d.program,"position"),d.a_normal=e.getAttribLocation(d.program,"normal"),d.a_text_coord=e.getAttribLocation(d.program,"text_coord"),d.buffer_vertices=e.createBuffer(),d.texture_bark_willow=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_bark_willow),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,0,0,255])),d.texture_reed_roof=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_reed_roof),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([0,128,128,255])),d.texture_rough_wood=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_rough_wood),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,0,128,255])),d.vao=e.createVertexArray(),e.bindVertexArray(d.vao),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.enableVertexAttribArray(d.a_position),e.enableVertexAttribArray(d.a_normal),e.enableVertexAttribArray(d.a_text_coord),e.vertexAttribPointer(d.a_position,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_normal,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_text_coord,2,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,6*Float32Array.BYTES_PER_ELEMENT),e.bindVertexArray(null),u.WebGLUtils.readObj("./objects/Cabin/obj/cabin.obj").then((t=>{const r=new Float32Array(8*t.index_vertices.length);for(let e=0;e<t.index_vertices.length;++e){const n=t.vertices[t.index_vertices[e]],a=t.normals[t.index_normals[e]],o=t.texture_cordinates[t.index_texture_cordinates[e]];r[8*e+0]=n[0],r[8*e+1]=n[1],r[8*e+2]=n[2],r[8*e+3]=a[0],r[8*e+4]=a[1],r[8*e+5]=a[2],r[8*e+6]=o[0],r[8*e+7]=o[1]}e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,r,WebGL2RenderingContext.STATIC_DRAW),d.vertices=t.index_vertices.length,d.objects_mtl_ranges=t.objects_ranges})),fetch("objects/Cabin/textures/bark_willow_diff_4k.jpg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_bark_willow),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/Cabin/textures/reed_roof_04_diff_4k.jpg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_reed_roof),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/Cabin/textures/rough_wood_diff_4k.jpg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_rough_wood),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)}))}}t.Cabin=d,d.initialized=!1,d.vertices=0,d.objects_mtl_ranges=new Map},761:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;const i=o(r(887));t.Camera=class{constructor(e,t,r){this.need_recalculation=!1,this.position=e,this.look_at=t,this.up_vector=r,this.camera_matrix=i.mat4.create(),this.view_matrix=i.mat4.create(),this.calculateCameraViewMatrix()}calculateCameraViewMatrix(){const e=i.vec3.create(),t=i.vec3.create(),r=i.vec3.create();i.vec3.sub(r,this.position,this.look_at),i.vec3.normalize(r,r),i.vec3.cross(e,this.up_vector,r),i.vec3.normalize(e,e),i.vec3.cross(t,r,e),this.camera_matrix[0]=e[0],this.camera_matrix[1]=e[1],this.camera_matrix[2]=e[2],this.camera_matrix[3]=0,this.camera_matrix[4]=t[0],this.camera_matrix[5]=t[1],this.camera_matrix[6]=t[2],this.camera_matrix[7]=0,this.camera_matrix[8]=r[0],this.camera_matrix[9]=r[1],this.camera_matrix[10]=r[2],this.camera_matrix[11]=0,this.camera_matrix[12]=-this.position[0],this.camera_matrix[13]=-this.position[1],this.camera_matrix[14]=-this.position[2],this.camera_matrix[15]=1;const n=i.vec3.dot(e,this.position),a=i.vec3.dot(t,this.position),o=i.vec3.dot(r,this.position);this.view_matrix[0]=e[0],this.view_matrix[1]=t[0],this.view_matrix[2]=r[0],this.view_matrix[3]=0,this.view_matrix[4]=e[1],this.view_matrix[5]=t[1],this.view_matrix[6]=r[1],this.view_matrix[7]=0,this.view_matrix[8]=e[2],this.view_matrix[9]=t[2],this.view_matrix[10]=r[2],this.view_matrix[11]=0,this.view_matrix[12]=-n,this.view_matrix[13]=-a,this.view_matrix[14]=-o,this.view_matrix[15]=1,this.need_recalculation=!1}getViewMatrix(){return this.need_recalculation&&this.calculateCameraViewMatrix(),this.view_matrix}getCameraMatrix(){return this.need_recalculation&&this.calculateCameraViewMatrix(),this.camera_matrix}getCameraMatrixAndViewMatrix(){return this.need_recalculation&&this.calculateCameraViewMatrix(),[this.camera_matrix,this.view_matrix]}updateCameraPosition(e){this.position=e,this.need_recalculation=!0}updateLookAt(e){this.look_at=e,this.need_recalculation=!0}updateUpVector(e){this.up_vector=e,this.need_recalculation=!0}getCameraPosition(){return this.position}getCameraLookingAt(){return this.look_at}getCameraUpVector(){return this.up_vector}}},168:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GlowKnife=void 0;const s=o(r(887)),u=r(916),c=i(r(747)),l=i(r(448));class d{constructor(e){this.time_total=2e3*Math.random()+1e3,this.paused_animation=!1,this.accumulated_time=0,this.model=s.mat4.create(),s.mat4.translate(this.model,this.model,[-5,0,8]),s.mat4.rotateY(this.model,this.model,Math.PI/4),s.mat4.rotateZ(this.model,this.model,-Math.PI/4),d.initialized||this.setup(e),d.initialized=!0}updateAnimation(e){if(!this.paused_animation){this.accumulated_time+=e;const t=this.accumulated_time/this.time_total,r=s.vec3.fromValues(this.model[12],this.model[13],this.model[14]);s.mat4.rotate(this.model,s.mat4.create(),2*Math.PI*t,[0,1,0]),this.model[12]=r[0],this.model[13]=r[1],this.model[14]=r[2]}}resetAnimation(){this.accumulated_time=0}toggleAnimation(){this.paused_animation=!this.paused_animation}pauseAnimation(){this.paused_animation=!0}resumeAnimation(){this.paused_animation=!1}draw(e,t,r){e.useProgram(d.program),e.bindVertexArray(d.vao),e.uniformMatrix4fv(d.u_model,!1,this.model),e.uniformMatrix4fv(d.u_view,!1,t),e.uniformMatrix4fv(d.u_projection,!1,r),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture),e.drawArrays(WebGL2RenderingContext.TRIANGLES,0,d.vertices),e.bindVertexArray(null)}setup(e){d.program=u.WebGLUtils.createProgram(e,u.WebGLUtils.createShader(e,WebGL2RenderingContext.VERTEX_SHADER,c.default),u.WebGLUtils.createShader(e,WebGL2RenderingContext.FRAGMENT_SHADER,l.default)),e.useProgram(d.program),d.u_model=e.getUniformLocation(d.program,"model"),d.u_view=e.getUniformLocation(d.program,"view"),d.u_projection=e.getUniformLocation(d.program,"projection"),d.a_position=e.getAttribLocation(d.program,"position"),d.a_normal=e.getAttribLocation(d.program,"normal"),d.a_text_coord=e.getAttribLocation(d.program,"text_coord"),d.buffer_vertices=e.createBuffer(),d.texture=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,128,128,255])),d.vao=e.createVertexArray(),e.bindVertexArray(d.vao),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.enableVertexAttribArray(d.a_position),e.enableVertexAttribArray(d.a_normal),e.enableVertexAttribArray(d.a_text_coord),e.vertexAttribPointer(d.a_position,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_normal,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_text_coord,2,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,6*Float32Array.BYTES_PER_ELEMENT),e.bindVertexArray(null),u.WebGLUtils.readObj("./objects/GlowKnife/Glow_Knife.obj").then((t=>{const r=new Float32Array(8*t.index_vertices.length);for(let e=0;e<t.index_vertices.length;++e){const n=t.vertices[t.index_vertices[e]],a=t.normals[t.index_normals[e]],o=t.texture_cordinates[t.index_texture_cordinates[e]];r[8*e+0]=n[0],r[8*e+1]=n[1],r[8*e+2]=n[2],r[8*e+3]=a[0],r[8*e+4]=a[1],r[8*e+5]=a[2],r[8*e+6]=o[0],r[8*e+7]=o[1]}e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,r,WebGL2RenderingContext.STATIC_DRAW),d.vertices=t.index_vertices.length})),fetch("objects/GlowKnife/Glow_Knife_Texture.png").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)}))}}t.GlowKnife=d,d.initialized=!1,d.vertices=0},869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MovingCamera=void 0;const n=r(761);class a extends n.Camera{constructor(e,t,r,n=null,a=null){super(t.getPoint(0),t.getPointTangent(0),e),this.time_total=1e4,this.accumulated_time=0,this.paused_animation=!1,this.camera_path=t,this.camera_loking_at_path=n,this.time_total=r,this.slider_controller=a,null!=this.slider_controller&&(this.slider_controller.max=r.toFixed(2),this.slider_controller.addEventListener("input",(e=>{const t=parseFloat(this.slider_controller.value)/r;this.accumulated_time=t*r})))}updateAnimation(e){if(!this.paused_animation){this.accumulated_time=(this.accumulated_time+e)%this.time_total;const t=this.accumulated_time/this.time_total;super.updateCameraPosition(this.camera_path.getPoint(t)),null!=this.camera_loking_at_path?super.updateLookAt(this.camera_loking_at_path.getPoint(t)):super.updateLookAt(this.camera_path.getPointTangent(t)),null!=this.slider_controller&&(this.slider_controller.value=""+(t*parseFloat(this.slider_controller.max)-parseFloat(this.slider_controller.min)))}}resetAnimation(){null!=this.slider_controller&&(this.slider_controller.value=this.slider_controller.min),this.accumulated_time=0}toggleAnimation(){this.paused_animation=!this.paused_animation}pauseAnimation(){this.paused_animation=!0}resumeAnimation(){this.paused_animation=!1}}t.MovingCamera=a},115:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SplinePoints=void 0;const s=o(r(887)),u=r(916),c=i(r(254)),l=i(r(536));class d{constructor(e,t){this.lines=0,this.model=s.mat4.create(),this.spline=t,this.buffer_vertices=e.createBuffer(),this.vao=e.createVertexArray(),this.buffer_control_points=e.createBuffer(),this.vao_control_points=e.createVertexArray(),d.initialized||this.setup(e),d.initialized=!0,this.updateSplinePoints(e)}draw(e,t,r){e.useProgram(d.program),e.bindVertexArray(this.vao),e.uniformMatrix4fv(d.u_model,!1,this.model),e.uniformMatrix4fv(d.u_view,!1,t),e.uniformMatrix4fv(d.u_projection,!1,r),e.uniform4f(d.u_color,1,0,0,1),e.drawArrays(WebGL2RenderingContext.LINE_STRIP,0,this.lines),e.bindVertexArray(this.vao_control_points),e.uniformMatrix4fv(d.u_model,!1,this.model),e.uniformMatrix4fv(d.u_view,!1,t),e.uniformMatrix4fv(d.u_projection,!1,r),e.uniform4f(d.u_color,.25,.25,.3,1),e.drawArrays(WebGL2RenderingContext.LINES,0,4*this.spline.getNumCurvesInSpline),e.disable(e.DEPTH_TEST),e.drawArrays(WebGL2RenderingContext.POINTS,0,4*this.spline.getNumCurvesInSpline),e.enable(e.DEPTH_TEST),e.bindVertexArray(null)}updateSplinePoints(e){this.spline.sampleSpline();const t=new Float32Array(3*this.spline.array_points.length);this.spline.array_points.forEach(((e,r)=>{t[3*r+0]=e[0],t[3*r+1]=e[1],t[3*r+2]=e[2]})),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,this.buffer_vertices),e.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,t,WebGL2RenderingContext.STATIC_DRAW),this.lines=this.spline.array_points.length;const r=new Float32Array(3*this.spline.getNumCurvesInSpline*4);for(let e=0;e<this.spline.getNumCurvesInSpline;++e){const t=this.spline.getCurveByIndex(e);null==t||t.getControlPoints.forEach(((t,n)=>{r[4*e*3+3*n+0]=t[0],r[4*e*3+3*n+1]=t[1],r[4*e*3+3*n+2]=t[2]}))}e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,this.buffer_control_points),e.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,r,WebGL2RenderingContext.STATIC_DRAW)}setup(e){d.program=u.WebGLUtils.createProgram(e,u.WebGLUtils.createShader(e,WebGL2RenderingContext.VERTEX_SHADER,c.default),u.WebGLUtils.createShader(e,WebGL2RenderingContext.FRAGMENT_SHADER,l.default)),e.useProgram(d.program),d.u_model=e.getUniformLocation(d.program,"model"),d.u_view=e.getUniformLocation(d.program,"view"),d.u_projection=e.getUniformLocation(d.program,"projection"),d.u_color=e.getUniformLocation(d.program,"color"),d.a_position=e.getAttribLocation(d.program,"position"),e.bindVertexArray(this.vao),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,this.buffer_vertices),e.enableVertexAttribArray(d.a_position),e.vertexAttribPointer(d.a_position,3,WebGL2RenderingContext.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.bindVertexArray(null),e.bindVertexArray(this.vao_control_points),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,this.buffer_control_points),e.enableVertexAttribArray(d.a_position),e.vertexAttribPointer(d.a_position,3,WebGL2RenderingContext.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.bindVertexArray(null)}}t.SplinePoints=d,d.initialized=!1},18:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tower=void 0;const s=o(r(887)),u=r(916),c=i(r(532)),l=i(r(194));class d{constructor(e){this.model=s.mat4.create(),s.mat4.scale(this.model,this.model,[2,2,2]),s.mat4.translate(this.model,this.model,[0,7.1,0]),d.initialized||this.setup(e),d.initialized=!0}draw(e,t,r){e.useProgram(d.program),e.bindVertexArray(d.vao),e.uniformMatrix4fv(d.u_model,!1,this.model),e.uniformMatrix4fv(d.u_view,!1,t),e.uniformMatrix4fv(d.u_projection,!1,r),d.objects_mtl_ranges.forEach(((t,r)=>{switch(t.material){case"home_uv3":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_home_uv3_albedo);break;case"fences_uv2":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_albedo);break;case"floor_uv1":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_floor_uv1_albedo);break;case"grass":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_grass_albedo);break;case"window":e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_emissive)}e.drawArrays(WebGL2RenderingContext.TRIANGLES,r[0],r[1])})),e.bindVertexArray(null)}setup(e){d.program=u.WebGLUtils.createProgram(e,u.WebGLUtils.createShader(e,WebGL2RenderingContext.VERTEX_SHADER,c.default),u.WebGLUtils.createShader(e,WebGL2RenderingContext.FRAGMENT_SHADER,l.default)),e.useProgram(d.program),d.u_model=e.getUniformLocation(d.program,"model"),d.u_view=e.getUniformLocation(d.program,"view"),d.u_projection=e.getUniformLocation(d.program,"projection"),d.a_position=e.getAttribLocation(d.program,"position"),d.a_normal=e.getAttribLocation(d.program,"normal"),d.a_text_coord=e.getAttribLocation(d.program,"text_coord"),d.buffer_vertices=e.createBuffer(),d.texture_albedo=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,0,0,255])),d.texture_floor_uv1_albedo=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_floor_uv1_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([0,128,128,255])),d.texture_grass_albedo=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_grass_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,0,128,255])),d.texture_home_uv3_albedo=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_home_uv3_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,128,0,255])),d.texture_emissive=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_emissive),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([128,255,0,255])),d.vao=e.createVertexArray(),e.bindVertexArray(d.vao),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.enableVertexAttribArray(d.a_position),e.enableVertexAttribArray(d.a_normal),e.enableVertexAttribArray(d.a_text_coord),e.vertexAttribPointer(d.a_position,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_normal,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribPointer(d.a_text_coord,2,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,6*Float32Array.BYTES_PER_ELEMENT),e.bindVertexArray(null),u.WebGLUtils.readObj("./objects/Tower/obj/lp_tower.obj").then((t=>{const r=new Float32Array(8*t.index_vertices.length);for(let e=0;e<t.index_vertices.length;++e){const n=t.vertices[t.index_vertices[e]],a=t.normals[t.index_normals[e]],o=t.texture_cordinates[t.index_texture_cordinates[e]];r[8*e+0]=n[0],r[8*e+1]=n[1],r[8*e+2]=n[2],r[8*e+3]=a[0],r[8*e+4]=a[1],r[8*e+5]=a[2],r[8*e+6]=o[0],r[8*e+7]=o[1]}e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,r,WebGL2RenderingContext.STATIC_DRAW),d.vertices=t.index_vertices.length,d.objects_mtl_ranges=t.objects_ranges})),fetch("objects/Tower/textures/albedo.jpeg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/Tower/textures/floor_uv1_albedo.jpeg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_floor_uv1_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/Tower/textures/grass_albedo.jpeg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_grass_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/Tower/textures/home_uv3_albedo.jpeg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_home_uv3_albedo),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)})),fetch("objects/Tower/textures/emissive.jpeg").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture_emissive),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)}))}}t.Tower=d,d.initialized=!1,d.vertices=0,d.objects_mtl_ranges=new Map},189:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Virus=void 0;const s=o(r(887)),u=r(916),c=i(r(690)),l=i(r(565));class d{constructor(e,t=s.vec3.create()){this.time_total=1e4*Math.random()+5e3,this.roation_axis=s.vec3.fromValues(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1),this.accumulated_time=0,this.paused_animation=!1,this.z_radius=10*Math.random(),this.x_radius=10*Math.random(),this.y_radius=10*Math.random(),this.rotation_orientation=Math.ceil(2*Math.random())%2==0?1:-1,this.model=s.mat4.create(),s.mat4.scale(this.model,this.model,[.04,.04,.04]),this.roation_center=t,0==d.initialized&&this.setup(e),d.initialized=!0}updateAnimation(e){if(!this.paused_animation){this.accumulated_time,this.time_total,this.accumulated_time=(this.accumulated_time+e)%this.time_total;const t=this.accumulated_time/this.time_total;s.mat4.rotate(this.model,this.model,.001*e,this.roation_axis),this.model[12]=this.roation_center[0]+Math.cos(2*Math.PI*t*this.rotation_orientation)*this.x_radius,this.model[13]=this.roation_center[1]+this.y_radius,this.model[14]=this.roation_center[2]+Math.sin(2*Math.PI*t*this.rotation_orientation)*this.z_radius}}resetAnimation(){this.accumulated_time=0}toggleAnimation(){this.paused_animation=!this.paused_animation}pauseAnimation(){this.paused_animation=!0}resumeAnimation(){this.paused_animation=!1}draw(e,t,r){e.useProgram(d.program),e.bindVertexArray(d.vao),e.uniformMatrix4fv(d.u_model,!1,this.model),e.uniformMatrix4fv(d.u_view,!1,t),e.uniformMatrix4fv(d.u_projection,!1,r),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture),e.drawArrays(WebGL2RenderingContext.TRIANGLES,0,d.vertices),e.bindVertexArray(null)}setup(e){d.program=u.WebGLUtils.createProgram(e,u.WebGLUtils.createShader(e,WebGL2RenderingContext.VERTEX_SHADER,c.default),u.WebGLUtils.createShader(e,WebGL2RenderingContext.FRAGMENT_SHADER,l.default)),e.useProgram(d.program),d.u_model=e.getUniformLocation(d.program,"model"),d.u_view=e.getUniformLocation(d.program,"view"),d.u_projection=e.getUniformLocation(d.program,"projection"),d.a_position=e.getAttribLocation(d.program,"position"),d.a_normal=e.getAttribLocation(d.program,"normal"),d.a_text_coord=e.getAttribLocation(d.program,"text_coord"),d.buffer_vertices=e.createBuffer(),d.texture=e.createTexture(),e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,WebGL2RenderingContext.RGBA,1,1,0,WebGL2RenderingContext.RGBA,WebGL2RenderingContext.UNSIGNED_BYTE,new Uint8Array([255,32,64,255])),d.vao=e.createVertexArray(),e.bindVertexArray(d.vao),e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.vertexAttribPointer(d.a_position,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(d.a_position),e.vertexAttribPointer(d.a_normal,3,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(d.a_normal),e.vertexAttribPointer(d.a_text_coord,2,WebGL2RenderingContext.FLOAT,!1,8*Float32Array.BYTES_PER_ELEMENT,6*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(d.a_text_coord),e.bindVertexArray(null),u.WebGLUtils.readObj("./objects/Virus/Coronavirus_Lowpoly.obj").then((t=>{const r=new Float32Array(8*t.index_vertices.length);for(let e=0;e<t.index_vertices.length;++e){const n=t.vertices[t.index_vertices[e]],a=t.normals[t.index_normals[e]],o=t.texture_cordinates[t.index_texture_cordinates[e]];r[8*e+0]=n[0],r[8*e+1]=n[1],r[8*e+2]=n[2],r[8*e+3]=a[0],r[8*e+4]=a[1],r[8*e+5]=a[2],r[8*e+6]=o[0],r[8*e+7]=o[1]}e.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER,d.buffer_vertices),e.bufferData(WebGL2RenderingContext.ARRAY_BUFFER,r,WebGL2RenderingContext.STATIC_DRAW),d.vertices=t.index_vertices.length})),fetch("objects/Virus/coronavirus diffuse.png").then((e=>e.blob())).then((t=>{const r=new Image;r.onload=()=>{e.bindTexture(WebGL2RenderingContext.TEXTURE_2D,d.texture),e.texImage2D(WebGL2RenderingContext.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D)},r.src=URL.createObjectURL(t)}))}}t.Virus=d,d.initialized=!1,d.vertices=0},916:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUtils=void 0;const s=o(r(887));var u;!function(e){function t(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(e);return yield t.text()}))}function r(e){return i(this,void 0,void 0,(function*(){const r=yield t(e);let n=new Map,a="";const o=r.split(/\n/);for(const e of o){let t=e.trim().split(/\s+/);if("newmtl"==t[0]){a=t[1].trim();const e={Ns:0,Ka:s.vec3.fromValues(0,0,0),Kd:s.vec3.fromValues(0,0,0),Ks:s.vec3.fromValues(0,0,0),Ke:s.vec3.fromValues(0,0,0),Ni:0,Tr:0,d:0,illum:0,material:a};n.set(a,e)}else if("Ns"==t[0]){if(n.has(a)){const e=n.get(a);e.Ns=parseFloat(t[1].trim()),n.set(a,e)}}else if("Ka"==t[0]){if(n.has(a)){const e=n.get(a);e.Ka=s.vec3.fromValues(parseFloat(t[1].trim()),parseFloat(t[2].trim()),parseFloat(t[3].trim())),n.set(a,e)}}else if("Kd"==t[0]){if(n.has(a)){const e=n.get(a);e.Kd=s.vec3.fromValues(parseFloat(t[1].trim()),parseFloat(t[2].trim()),parseFloat(t[3].trim())),n.set(a,e)}}else if("Ks"==t[0]){if(n.has(a)){const e=n.get(a);e.Ks=s.vec3.fromValues(parseFloat(t[1].trim()),parseFloat(t[2].trim()),parseFloat(t[3].trim())),n.set(a,e)}}else if("Ke"==t[0]){if(n.has(a)){const e=n.get(a);e.Ke=s.vec3.fromValues(parseFloat(t[1].trim()),parseFloat(t[2].trim()),parseFloat(t[3].trim())),n.set(a,e)}}else if("Ni"==t[0]){if(n.has(a)){const e=n.get(a);e.Ni=parseFloat(t[1].trim()),n.set(a,e)}}else if("d"==t[0]){if(n.has(a)){const e=n.get(a);e.d=parseFloat(t[1].trim()),n.set(a,e)}}else if("Tr"==t[0]){if(n.has(a)){const e=n.get(a);e.Tr=parseFloat(t[1].trim()),n.set(a,e)}}else if("illum"==t[0]&&n.has(a)){const e=n.get(a);e.illum=parseFloat(t[1].trim()),n.set(a,e)}}return n}))}e.sleep=(e=0)=>new Promise((t=>setTimeout(t,e))),e.readFile=t,e.createShader=function(e,t,r){const n=e.createShader(t);if(n){if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}return null},e.createProgram=function(e,t,r){const n=e.createProgram();if(n){if(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS))return n;console.log(e.getProgramInfoLog(n)),e.deleteProgram(n)}return null},e.readMtl=r,e.readObj=function(e){return i(this,void 0,void 0,(function*(){const n=yield t(e),a={vertices:new Array,normals:new Array,texture_cordinates:new Array,index_vertices:new Array,index_normals:new Array,index_texture_cordinates:new Array,objects_ranges:new Map},o=new Array;let i="",u=0,c=0;const l=n.split(/\n/);for(const t of l){let n=t.trim().split(/\s+/);if("v"==n[0])a.vertices.push(s.vec3.fromValues(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])));else if("vn"==n[0])a.normals.push(s.vec3.fromValues(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])));else if("vt"==n[0])a.texture_cordinates.push(s.vec2.fromValues(parseFloat(n[1]),parseFloat(n[2])));else if("f"==n[0])for(let e=1;e<n.length;++e){u+=1;const t=n[e].trim().split(/\//);t.length>=1&&a.index_vertices.push(parseInt(t[0])-1),t.length>=2&&a.index_texture_cordinates.push(parseInt(t[1])-1),t.length>=3&&a.index_normals.push(parseInt(t[2])-1)}else if("mtllib"==n[0]){const t=yield r(`${e.slice(0,e.lastIndexOf("/"))}/${n[1].trim().replace("./","")}`);o.push(t)}else if("usemtl"==n[0]&&n[1].trim()!=i){const e=o.find((e=>e.has(i)));if(null!=e){const t=e.get(i);a.objects_ranges.set([c,u],t),c+=u,u=0}i=n[1].trim()}}if(""!=i){const e=o.find((e=>e.has(i)));if(null!=e){const t=e.get(i);a.objects_ranges.set([c,u],t)}}return a}))}}(u||(t.WebGLUtils=u={})),t.default=u},867:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(887)),u=r(334),c=r(277),l=r(761),d=r(957),h=r(18),f=r(189),m=r(168),_=r(869),v=r(115),b=r(409);var p,x,g,M,R=new Array,E=new Array,C=new Array,A=0,T=(Date.now(),s.mat4.create()),L=s.vec2.create(),y=-1,G=-1,w=null,B=!1;function P(){!function(){const e=Date.now(),t=e-U;E.forEach((e=>{e.updateAnimation(t)})),U=e}(),s.mat4.create();const e=C[A].getViewMatrix();x.clear(WebGL2RenderingContext.COLOR_BUFFER_BIT),R.forEach((t=>{t.draw(x,e,T)})),requestAnimationFrame(P)}var U=0;window.onload=function(){return i(this,void 0,void 0,(function*(){M=document.getElementById("animationSlider"),function(e){const t=window.innerWidth-25,r=window.innerHeight-50;e.width=t,e.height=r,e.style.width=`${t}px`,e.style.height=`${r}px`}(p=document.getElementById("mainCanvas")),(x=p.getContext("webgl2")).enable(x.DEPTH_TEST),x.clearColor(0,0,0,1),x.clear(WebGL2RenderingContext.COLOR_BUFFER_BIT),x.viewport(0,0,p.width,p.height);const e=Math.PI/4,t=p.width/p.height;s.mat4.perspective(T,e,t,1,1e3),(g=new u.Spline(30)).addCurve(new c.CubicBezierCurve([52.27757263183594,11.551797866821289,-23.164257049560547],[45.84561538696289,10.66297721862793,-28.90583038330078],[40.53406524658203,9.781454086303711,-33.59396743774414],[44.20197296142578,8.698997497558594,-35.5297737121582])),g.addCurve(new c.CubicBezierCurve([44.20197296142578,8.698997497558594,-35.5297737121582],[47.80443572998047,7.635854721069336,-37.4310417175293],[48.90955352783203,10.05416488647461,-38.27435302734375],[48.37994384765625,9.181713104248047,-39.0809440612793])),g.addCurve(new c.CubicBezierCurve([48.37994384765625,9.181713104248047,-39.0809440612793],[47.85033416748047,8.309261322021484,-39.887535095214844],[44.189414978027344,7.336818218231201,-43.279205322265625],[42.35816192626953,5.894342422485352,-43.717201232910156])),g.addCurve(new c.CubicBezierCurve([42.35816192626953,5.894342422485352,-43.717201232910156],[40.79904556274414,4.666228771209717,-44.09010696411133],[39.36396789550781,5.339372158050537,-44.439796447753906],[38.611629486083984,4.276976585388184,-43.583091735839844])),g.addCurve(new c.CubicBezierCurve([38.611629486083984,4.276976585388184,-43.583091735839844],[37.859291076660156,3.21458101272583,-42.72638702392578],[36.42537307739258,1.9321856498718262,-42.002220153808594],[36.182647705078125,1.879789113998413,-40.75492858886719])),g.addCurve(new c.CubicBezierCurve([36.182647705078125,1.879789113998413,-40.75492858886719],[35.8529052734375,1.808608055114746,-39.06047439575195],[35.361328125,3.3349945545196533,-38.094757080078125],[35.813323974609375,2.7125985622406006,-35.11789321899414])),g.addCurve(new c.CubicBezierCurve([35.813323974609375,2.7125985622406006,-35.11789321899414],[36.173160552978516,2.2171061038970947,-32.74799728393555],[32.78002166748047,1.4678065776824951,-30.63941764831543],[30.692184448242188,2.765408754348755,-29.289331436157227])),g.addCurve(new c.CubicBezierCurve([30.692184448242188,2.765408754348755,-29.289331436157227],[25.68269920349121,5.381699085235596,-24.932937622070312],[19.088518142700195,2.6806888580322266,-23.385942459106445],[19.588287353515625,3.458324432373047,-16.815017700195312])),g.addCurve(new c.CubicBezierCurve([19.588287353515625,3.458324432373047,-16.815017700195312],[20.088056564331055,4.235960006713867,-10.24409294128418],[21.761009216308594,5.62360954284668,-9.765114784240723],[17.907367706298828,5.791231155395508,-7.105788230895996])),g.addCurve(new c.CubicBezierCurve([17.907367706298828,5.791231155395508,-7.105788230895996],[14.058921813964844,5.958626747131348,-4.450047016143799],[11.292231559753418,6.126474380493164,.30044007301330566],[5.988758087158203,6.294095993041992,2.137937545776367])),g.addCurve(new c.CubicBezierCurve([5.988758087158203,6.294095993041992,2.137937545776367],[.6852846741676331,6.46171760559082,3.9754350185394287],[-6.686426162719727,7.619353294372559,5.663105487823486],[-10.292840957641602,6.796961307525635,8.109070777893066])),g.addCurve(new c.CubicBezierCurve([-10.292840957641602,6.796961307525635,8.109070777893066],[-13.899255752563477,5.974569320678711,10.555036544799805],[-14.16030502319336,5.152177333831787,15.710256576538086],[-17.408811569213867,4.329784870147705,18.891162872314453])),g.addCurve(new c.CubicBezierCurve([-17.408811569213867,4.329784870147705,18.891162872314453],[-20.657318115234375,3.507392406463623,22.07206916809082],[-20.819738388061523,1.9449825286865234,29.35525894165039],[-25.94344139099121,3.072634696960449,29.539506912231445])),g.addCurve(new c.CubicBezierCurve([-25.94344139099121,3.072634696960449,29.539506912231445],[-31.0671443939209,4.200286865234375,29.7237548828125],[-37.61170959472656,5.327939033508301,30.266164779663086],[-39.344993591308594,6.455591201782227,24.506488800048828])),g.addCurve(new c.CubicBezierCurve([-39.344993591308594,6.455591201782227,24.506488800048828],[-41.078277587890625,7.583243370056152,18.74681282043457],[-43.16081619262695,8.710895538330078,11.939945220947266],[-41.60453414916992,8.408514976501465,6.633108615875244])),g.addCurve(new c.CubicBezierCurve([-41.60453414916992,8.408514976501465,6.633108615875244],[-40.04825210571289,8.106134414672852,1.326271891593933],[-40.00471878051758,7.803753852844238,-4.169132232666016],[-36.93568801879883,7.501373291015625,-9.28740119934082])),g.addCurve(new c.CubicBezierCurve([-36.93568801879883,7.501373291015625,-9.28740119934082],[-33.86665725708008,7.198992729187012,-14.405670166015625],[-31.977123260498047,6.686607360839844,-23.694408416748047],[-27.728595733642578,8.214268684387207,-24.642208099365234])),g.addCurve(new c.CubicBezierCurve([-27.728595733642578,8.214268684387207,-24.642208099365234],[-23.48006820678711,9.74193000793457,-25.590007781982422],[-19.23154067993164,11.269591331481934,-26.53780746459961],[-16.999893188476562,12.797252655029297,-25.965988159179688])),g.addCurve(new c.CubicBezierCurve([-16.999893188476562,12.797252655029297,-25.965988159179688],[-14.768245697021484,14.32491397857666,-25.394168853759766],[-12.536598205566406,16.97260093688965,-24.822349548339844],[-10.23611831665039,17.380237579345703,-20.28891372680664])),g.addCurve(new c.CubicBezierCurve([-10.23611831665039,17.380237579345703,-20.28891372680664],[-7.935638427734375,17.787874221801758,-15.755477905273438],[-2.420177459716797,18.195510864257812,-10.52244758605957],[-2.7075624465942383,23.563261032104492,-8.911391258239746])),g.addCurve(new c.CubicBezierCurve([-2.7075624465942383,23.563261032104492,-8.911391258239746],[-2.9949474334716797,28.931011199951172,-7.300334930419922],[-8.483508110046387,38.82971954345703,-6.973363399505615],[-3.9963948726654053,39.66651153564453,-2.25189208984375])),g.addCurve(new c.CubicBezierCurve([-3.9963948726654053,39.66651153564453,-2.25189208984375],[.4907180368900299,40.50330352783203,2.469578742980957],[2.019820213317871,42.84038543701172,6.94907283782959],[6.007211685180664,38.58612060546875,3.8320493698120117])),g.addCurve(new c.CubicBezierCurve([6.007211685180664,38.58612060546875,3.8320493698120117],[9.989109992980957,34.33771514892578,.7193196415901184],[12.697720527648926,29.19757080078125,-.24747821688652039],[19.287948608398438,25.823326110839844,-4.603044509887695])),g.addCurve(new c.CubicBezierCurve([19.287948608398438,25.823326110839844,-4.603044509887695],[25.735090255737305,22.522342681884766,-8.864043235778809],[58.70952988,12.44061852,-17.42268372],[52.27757263183594,11.551797866821289,-23.164257049560547]));const r=new u.Spline;r.addCurve(new c.CubicBezierCurve([43.84132385253906,11.450017929077148,-30.126686096191406],[41.900230407714844,11.240009307861328,-31.861360549926758],[49.00202178955078,11.770055770874023,-38.764225006103516],[48.08986282348633,10.78002643585205,-39.36024475097656])),r.addCurve(new c.CubicBezierCurve([48.08986282348633,10.78002643585205,-39.36024475097656],[47.177703857421875,9.789997100830078,-39.95626449584961],[43.22370910644531,8.189953804016113,-44.586509704589844],[41.181819915771484,6.249911308288574,-44.10685729980469])),r.addCurve(new c.CubicBezierCurve([41.181819915771484,6.249911308288574,-44.10685729980469],[39.139930725097656,4.309868812561035,-43.62720489501953],[38.269126892089844,2.369826316833496,-40.40739059448242],[37.23325729370117,2.319782257080078,-38.49576950073242])),r.addCurve(new c.CubicBezierCurve([37.23325729370117,2.319782257080078,-38.49576950073242],[36.1973876953125,2.26973819732666,-36.58414840698242],[35.64409637451172,2.219694137573242,-34.18566131591797],[34.125648498535156,2.5496573448181152,-32.76090621948242])),r.addCurve(new c.CubicBezierCurve([34.125648498535156,2.5496573448181152,-32.76090621948242],[32.607200622558594,2.8796205520629883,-31.336151123046875],[31.08875274658203,3.2095837593078613,-29.911396026611328],[29.57030487060547,3.5395469665527344,-28.48664093017578])),r.addCurve(new c.CubicBezierCurve([29.57030487060547,3.5395469665527344,-28.48664093017578],[28.051856994628906,3.8695101737976074,-27.061885833740234],[26.533409118652344,4.1994733810424805,-25.637130737304688],[25.01496124267578,4.5294365882873535,-24.21237564086914])),r.addCurve(new c.CubicBezierCurve([25.01496124267578,4.5294365882873535,-24.21237564086914],[23.49651336669922,4.859399795532227,-22.787620544433594],[21.978065490722656,5.419361114501953,-21.362865447998047],[20.55430793762207,5.519325256347656,-19.027400970458984])),r.addCurve(new c.CubicBezierCurve([20.55430793762207,5.519325256347656,-19.027400970458984],[19.440431594848633,5.597532272338867,-17.20025062561035],[17.672340393066406,5.719256401062012,-15.496366500854492],[15.090792655944824,5.819221496582031,-13.253219604492188])),r.addCurve(new c.CubicBezierCurve([15.090792655944824,5.819221496582031,-13.253219604492188],[12.509244918823242,5.919186592102051,-11.010072708129883],[9.92769718170166,6.01915168762207,-8.766925811767578],[7.346149444580078,6.11911678314209,-6.523778915405273])),r.addCurve(new c.CubicBezierCurve([7.346149444580078,6.11911678314209,-6.523778915405273],[4.764601707458496,6.219081878662109,-4.280632019042969],[2.183053970336914,5.469051361083984,-2.037485122680664],[-.39849376678466797,6.079004287719727,.20566177368164062])),r.addCurve(new c.CubicBezierCurve([-.39849376678466797,6.079004287719727,.20566177368164062],[-2.98004150390625,6.688957214355469,2.4488086700439453],[-5.561589241027832,7.298910140991211,4.69195556640625],[-8.347888946533203,6.608861446380615,6.99647331237793])),r.addCurve(new c.CubicBezierCurve([-8.347888946533203,6.608861446380615,6.99647331237793],[-11.134188652038574,5.9188127517700195,9.30099105834961],[-13.920488357543945,5.228764057159424,11.605508804321289],[-17.050533294677734,4.538715362548828,14.533679008483887])),r.addCurve(new c.CubicBezierCurve([-17.050533294677734,4.538715362548828,14.533679008483887],[-20.180578231811523,3.8486666679382324,17.461849212646484],[-26.572376251220703,3.728623151779175,20.033111572265625],[-29.529823303222656,5.18857479095459,18.180912017822266])),r.addCurve(new c.CubicBezierCurve([-29.529823303222656,5.18857479095459,18.180912017822266],[-32.48727035522461,6.648526191711426,16.328712463378906],[-35.44471740722656,9.26848316192627,14.476513862609863],[-34.59291458129883,9.918436050415039,10.802721977233887])),r.addCurve(new c.CubicBezierCurve([-34.59291458129883,9.918436050415039,10.802721977233887],[-33.741111755371094,10.568388938903809,7.12893009185791],[-32.88930892944336,10.178324699401855,3.4551384449005127],[-32.037506103515625,10.19826602935791,-.21865345537662506])),r.addCurve(new c.CubicBezierCurve([-32.037506103515625,10.19826602935791,-.21865345537662506],[-31.18570327758789,10.218207359313965,-3.8924453258514404],[-30.795541763305664,10.23814868927002,-8.210365295410156],[-28.14240837097168,10.258090019226074,-10.891977310180664])),r.addCurve(new c.CubicBezierCurve([-28.14240837097168,10.258090019226074,-10.891977310180664],[-25.489274978637695,10.278031349182129,-13.573589324951172],[-22.47441864013672,10.297972679138184,-17.02860450744629],[-16.039573669433594,10.317914009094238,-15.837959289550781])),r.addCurve(new c.CubicBezierCurve([-16.039573669433594,10.317914009094238,-15.837959289550781],[-9.604728698730469,10.337855339050293,-14.647314071655273],[-1.8628361225128174,12.487783432006836,-14.484969139099121],[-2.0826168060302734,15.267728805541992,-13.299917221069336])),r.addCurve(new c.CubicBezierCurve([-2.0826168060302734,15.267728805541992,-13.299917221069336],[-2.3023974895477295,18.04767417907715,-12.11486530303955],[-5.011388778686523,21.557634353637695,-11.276493072509766],[-4.485385894775391,23.60756492614746,-9.117020606994629])),r.addCurve(new c.CubicBezierCurve([-4.485385894775391,23.60756492614746,-9.117020606994629],[-3.959383010864258,25.657495498657227,-6.957548141479492],[-3.362985134124756,29.767473220825195,-4.433291435241699],[-3.5032424926757812,29.757356643676758,-2.032350540161133])),r.addCurve(new c.CubicBezierCurve([-3.5032424926757812,29.757356643676758,-2.032350540161133],[-3.6434998512268066,29.74724006652832,.368590384721756],[-4.328841209411621,29.737123489379883,2.5868186950683594],[-1.0285816192626953,29.727006912231445,2.48535418510437])),r.addCurve(new c.CubicBezierCurve([-1.0285816192626953,29.727006912231445,2.48535418510437],[2.2716779708862305,29.716890335083008,2.383889675140381],[6.142961502075195,31.126792907714844,3.31345796585083],[8.872197151184082,28.66663360595703,2.180960178375244])),r.addCurve(new c.CubicBezierCurve([8.872197151184082,28.66663360595703,2.180960178375244],[11.601432800292969,26.20647430419922,1.0484623908996582],[14.217976570129395,23.746315002441406,1.0165657997131348],[17.059904098510742,21.286155700683594,-1.2165331840515137])),r.addCurve(new c.CubicBezierCurve([17.059904098510742,21.286155700683594,-1.2165331840515137],[19.935155868530273,18.797149658203125,-3.4758167266845703],[23.172927856445312,16.36583709716797,-4.57027006149292],[27.44634246826172,15.385711669921875,-7.8663835525512695])),r.addCurve(new c.CubicBezierCurve([27.44634246826172,15.385711669921875,-7.8663835525512695],[31.719757080078125,14.405586242675781,-11.162496566772461],[38.95112609863281,13.425460815429688,-11.782148361206055],[41.66248321533203,12.445335388183594,-16.90867042541504])),r.addCurve(new c.CubicBezierCurve([41.66248321533203,12.445335388183594,-16.90867042541504],[44.37384033203125,11.4652099609375,-22.035192489624023],[48.80209732055664,10.485084533691406,-26.600013732910156],[43.84132385253906,11.450017929077148,-30.126686096191406]));const n=new _.MovingCamera([0,1,0],g,6e4,r,M);C.push(new l.Camera([15,10,0],[0,0,0],[0,1,0]),n),E.push(n);for(let e=0;e<35;++e){const e=new f.Virus(x);R.push(e),E.push(e)}const a=new f.Virus(x,[-25,6,10]);a.time_total=3e3,s.mat4.scale(a.model,a.model,[2,2,2]),R.push(a),E.push(a);const o=new d.AWM(x,a);s.mat4.translate(o.model,o.model,[-8,9,3]);const i=new d.AWM(x,a);i.model[12]-=25,i.model[14]+=5,E.push(o),E.push(i);const U=new h.Tower(x),D=new h.Tower(x);s.mat4.translate(D.model,D.model,[10,-.1,10]);const W=new m.GlowKnife(x);W.model=s.mat4.create(),s.mat4.translate(W.model,W.model,[35,0,-40]),s.mat4.scale(W.model,W.model,[.7,1,.7]),E.push(W),R.push(new m.GlowKnife(x),W,U,D,new b.Cabin(x),o,i),function(){document.getElementById("playButton").addEventListener("click",(e=>{A=1,E.forEach((e=>{e.resetAnimation(),e.resumeAnimation()}))})),window.addEventListener("keydown",(e=>{let t=C[A];const r=t.getCameraPosition(),n=s.vec3.sub(s.vec3.create(),t.getCameraLookingAt(),r),a=t.getCameraMatrix();let o,i;switch(e.code){case"ArrowUp":i=s.vec3.create(),s.vec3.scale(i,s.vec3.fromValues(a[8],a[9],a[10]),-.5),s.vec3.add(r,r,i),o=s.vec3.add(s.vec3.create(),r,n),t.updateCameraPosition(r),t.updateLookAt(o);break;case"ArrowDown":i=s.vec3.create(),s.vec3.scale(i,s.vec3.fromValues(a[8],a[9],a[10]),.5),s.vec3.add(r,r,i),o=s.vec3.add(s.vec3.create(),r,n),t.updateCameraPosition(r),t.updateLookAt(o);break;case"ArrowRight":i=s.vec3.create(),s.vec3.scale(i,s.vec3.fromValues(a[0],a[1],a[2]),.5),s.vec3.add(r,r,i),o=s.vec3.add(s.vec3.create(),r,n),t.updateCameraPosition(r),t.updateLookAt(o);break;case"ArrowLeft":i=s.vec3.create(),s.vec3.scale(i,s.vec3.fromValues(a[0],a[1],a[2]),-.5),s.vec3.add(r,r,i),o=s.vec3.add(s.vec3.create(),r,n),t.updateCameraPosition(r),t.updateLookAt(o);break;case"ShiftRight":i=s.vec3.create(),s.vec3.scale(i,s.vec3.fromValues(a[4],a[5],a[6]),.5),s.vec3.add(r,r,i),o=s.vec3.add(s.vec3.create(),r,n),t.updateCameraPosition(r),t.updateLookAt(o);break;case"ControlRight":i=s.vec3.create(),s.vec3.scale(i,s.vec3.fromValues(a[4],a[5],a[6]),-.5),s.vec3.add(r,r,i),o=s.vec3.add(s.vec3.create(),r,n),t.updateCameraPosition(r),t.updateLookAt(o);break;case"ControlLeft":B=!0;break;case"KeyV":t=C[A],t instanceof _.MovingCamera&&t.pauseAnimation(),A=(A+1)%C.length,t=C[A],t instanceof _.MovingCamera&&t.resumeAnimation();break;case"KeyJ":null!=w&&(w.spline.turnG0Continuous(),w.updateSplinePoints(x));break;case"KeyK":null!=w&&(w.spline.turnG1Continuous(),w.updateSplinePoints(x));break;case"KeyL":null!=w&&(w.spline.turnC1Continuous(),w.updateSplinePoints(x));break;case"Semicolon":if(null!=w)for(let e=0;e<w.spline.getNumCurvesInSpline;++e){const t=w.spline.getCurveByIndex(e);null==t||t.getControlPoints.forEach((e=>{console.log(`[${e[0]}, ${e[1]}, ${e[2]}],`)}))}break;case"KeyH":if(null!=w){const e=w.spline.getCurveByIndex(w.spline.getNumCurvesInSpline-1),t=null==e?void 0:e.getControlPointByIndex(3),r=null==e?void 0:e.getControlPointByIndex(2),n=s.vec3.clone(t),a=s.vec3.sub(s.vec3.create(),t,r),o=s.vec3.add(s.vec3.create(),n,a),i=s.vec3.add(s.vec3.create(),o,a),u=s.vec3.add(s.vec3.create(),i,a);w.spline.addCurve(new c.CubicBezierCurve(n,o,i,u)),w.spline.sampleSpline(),w.updateSplinePoints(x)}break;case"KeyC":t.updateLookAt(s.vec3.fromValues(0,0,0));break;case"KeyX":const e=s.vec3.sub(s.vec3.create(),t.getCameraLookingAt(),t.getCameraPosition()),u=s.vec3.normalize(s.vec3.create(),e);t.updateLookAt(s.vec3.add(s.vec3.create(),t.getCameraPosition(),u))}})),window.addEventListener("keyup",(e=>{"ControlLeft"===e.code&&(B=!1)})),p.addEventListener("pointerdown",(n=>{if(L[0]=n.clientX,L[1]=n.clientY,0==n.button){const r=R.filter((e=>e instanceof v.SplinePoints));for(let t=0;t<r.length;++t){let n=r[t];for(let t=0;t<n.spline.getNumCurvesInSpline;++t){const r=n.spline.getCurveByIndex(t),a=r.getControlPoints.length;for(let o=0;o<a;++o){const a=r.getControlPointByIndex(o),i=s.vec3.create();s.vec3.transformMat4(i,a,C[A].getViewMatrix()),s.vec3.transformMat4(i,i,T);const u=s.vec2.sub(s.vec2.create(),s.vec2.fromValues(2*L[0]/p.width-1,2*-L[1]/p.height+1),s.vec2.fromValues(i[0],i[1]));if(s.vec2.length(u)<=.06)return w=n,y=t,G=o,void p.addEventListener("pointermove",e)}}}p.addEventListener("pointermove",t)}else 1==n.button&&p.addEventListener("pointermove",r)})),p.addEventListener("pointerup",(n=>{0==n.button?(p.removeEventListener("pointermove",t),p.removeEventListener("pointermove",e)):1==n.button&&p.removeEventListener("pointermove",r)})),p.addEventListener("wheel",(e=>{const t=C[A],r=t.getCameraPosition(),n=t.getCameraLookingAt(),a=s.vec3.create();s.vec3.sub(a,r,n);const o=s.vec3.len(a),i=s.vec3.create();s.vec3.normalize(i,a),e.deltaY>0?s.vec3.scaleAndAdd(r,n,i,o+1):e.deltaY<0&&s.vec3.scaleAndAdd(r,n,i,o-1),t.updateCameraPosition(r)}));const e=e=>{const t=s.vec2.fromValues(e.clientX,e.clientY),r=s.vec2.create();if(s.vec2.sub(r,t,L),null==w)return;const n=w.spline,a=n.getCurveByIndex(y),o=a.getControlPointByIndex(G),i=C[A].getCameraPosition(),u=s.vec3.sub(s.vec3.create(),o,i),c=C[A].getCameraMatrix();if(B){const e=s.vec3.fromValues(c[4],c[5],c[6]),t=s.vec3.dot([0,1,0],e);s.vec3.scaleAndAdd(u,u,[0,1,0],.01*r[1]*(t>0?-1:1))}else{const e=s.vec3.fromValues(c[8],0,c[10]),t=s.vec3.normalize(s.vec3.create(),e);s.vec3.scaleAndAdd(u,u,t,.01*r[1]);const n=s.vec3.fromValues(c[0],0,c[2]),a=s.vec3.normalize(s.vec3.create(),n);s.vec3.scaleAndAdd(u,u,a,.01*r[0])}const l=s.vec3.add(s.vec3.create(),i,u);a.changeControlPoint(G,l),n.updateCurve(y,a),w.updateSplinePoints(x),L=s.vec2.clone(t)},t=e=>{const t=C[A],r=t.getCameraPosition(),n=t.getCameraLookingAt(),a=s.vec3.create();s.vec3.sub(a,r,n);const o=s.vec2.fromValues(e.clientX,e.clientY),i=s.vec2.create();s.vec2.sub(i,o,L);const u=C[A].getCameraMatrix(),c=s.vec3.fromValues(u[4],u[5],u[6]),l=s.mat4.create();s.mat4.rotate(l,l,-.01*i[0],c),s.vec3.transformMat4(a,a,l);const d=s.vec3.fromValues(u[0],u[1],u[2]),h=s.mat4.create();s.mat4.rotate(h,h,-.01*i[1],d),s.vec3.transformMat4(a,a,h),L=s.vec2.clone(o),s.vec3.add(r,n,a),r[1]<.5&&(r[1]=.5),t.updateCameraPosition(r)},r=e=>{const t=C[A],r=t.getCameraPosition(),n=t.getCameraLookingAt(),a=s.vec3.create();s.vec3.sub(a,n,r);const o=s.vec2.fromValues(e.clientX,e.clientY),i=s.vec2.create();s.vec2.sub(i,o,L);const u=C[A].getCameraMatrix(),c=s.vec3.fromValues(u[4],u[5],u[6]),l=s.mat4.create();s.mat4.rotate(l,l,-.005*i[0],c),s.vec3.transformMat4(a,a,l);const d=s.vec3.fromValues(u[0],u[1],u[2]),h=s.mat4.create();s.mat4.rotate(h,h,-.005*i[1],d),s.vec3.transformMat4(a,a,h),L=s.vec2.clone(o),s.vec3.add(n,r,a),t.updateLookAt(n)}}(),Date.now(),P()}))}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(867)})();